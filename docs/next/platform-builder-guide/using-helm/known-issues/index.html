<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/kubevela.io/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kubevela.io/blog/atom.xml" title="KubeVela Blog Atom Feed"><title data-react-helmet="true">Known Limitations | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Known Limitations | KubeVela"><meta data-react-helmet="true" name="description" content="Limitations and Known Issues"><meta data-react-helmet="true" property="og:description" content="Limitations and Known Issues"><link data-react-helmet="true" rel="shortcut icon" href="/kubevela.io/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/kubevela.io/zh/docs/next/platform-builder-guide/using-helm/known-issues" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues" hreflang="x-default"><link rel="stylesheet" href="/kubevela.io/assets/css/styles.d1731fad.css">
<link rel="preload" href="/kubevela.io/assets/js/styles.19854286.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/runtime~main.92ebaa8a.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/main.9556a67d.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/1.ae7e8fff.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/2.0d1bb0bc.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/191.4c18a2e3.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/935f2afb.935ec562.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/17896441.732353c2.js" as="script">
<link rel="preload" href="/kubevela.io/assets/js/4b2cb9b9.3792f2d7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kubevela.io/"><img src="/kubevela.io/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/kubevela.io/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kubevela.io/docs/">Documentation</a><a class="navbar__item navbar__link" href="/kubevela.io/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kubevela.io/docs/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues">Next</a></li><li><a class="dropdown__link" href="/kubevela.io/docs/platform-builder-guide/using-helm/known-issues">v0.3.5</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="/kubevela.io/zh/docs/next/platform-builder-guide/using-helm/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-githab-link"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/kubevela.io/"><img src="/kubevela.io/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/kubevela.io/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/kubevela.io/docs/platform-builder-guide/using-helm/known-issues">v0.3.5</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/kubevela.io/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/kubevela.io/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">English</a></li><li class="menu__list-item"><a href="/kubevela.io/zh/docs/next/platform-builder-guide/using-helm/known-issues" target="_self" rel="noopener noreferrer" class="menu__link">ç®€ä½“ä¸­æ–‡</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-githab-link"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/overview/concepts">Core Concepts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/getting-started/install">Install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/getting-started/quick-start">Quick Start</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Platform Builder Guide</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Design Abstraction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/design-abstraction/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/design-abstraction/application">Application CRD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/design-abstraction/definition-and-templates">Definition CRD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Using CUE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/using-cue/basic">Learning CUE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/using-cue/workload-type">Defining Workload Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/using-cue/trait">Defining Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/using-cue/status">Advanced Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/platform-builder-guide/using-cue/openapi-v3-json-schema">Auto-generated Schema</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Using Helm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/component">Define Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/trait">Attach Traits</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/known-issues">Known Limitations</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Experience Guide</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Appfile</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/appfile/quick-start-appfile">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/appfile/learn-appfile">Learning Appfile</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Command Line Tool (CLI)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/cli/port-forward">Port Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/cli/check-logs">Check Application Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/cli/exec-cmd">Execute Commands in Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/cli/cap-center">Managing Capabilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/cli/config-enviroments">Setting Up Deployment Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/developer-experience-guide/cli/config-app">Configuring Data/Env in Application</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_config">vela_config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_env">vela_env</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_init">vela_init</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_up">vela_up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_version">vela_version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_exec">vela_exec</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_logs">vela_logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_ls">vela_ls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_port-forward">vela_port-forward</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_show">vela_show</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_status">vela_status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_workloads">vela_workloads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_traits">vela_traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_system">vela_system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_template">vela_template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/cli-references/vela_cap">vela_cap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Capability References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/overview">overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/webservice">webservice</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/task">task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/worker">worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/route">route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/metrics">metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/scaler">scaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/capability-references/rest">Restful API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kubevela.io/docs/next/roadmap/roadmap">Roadmap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/kubevela.io/docs/next/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for KubeVela <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/kubevela.io/docs/platform-builder-guide/using-helm/known-issues">latest version</a></strong> (v0.3.5).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">Known Limitations</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="limitations-and-known-issues"></a>Limitations and Known Issues<a class="hash-link" href="#limitations-and-known-issues" title="Direct link to heading">#</a></h2><p>Here are some known issues for using Helm chart as application component. Pleas note most of these restrictions will be fixed over time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="only-one-main-workload-in-the-chart"></a>Only one main workload in the chart<a class="hash-link" href="#only-one-main-workload-in-the-chart" title="Direct link to heading">#</a></h2><p>The chart must have exactly one workload being regarded as the <strong>main</strong> workload. In this context, <code>main workload</code> means the workload that will be tracked by KubeVela controllers, applied with traits and added into scopes. Only the <code>main workload</code> will benefit from KubeVela with rollout, revision, traffic management, etc.</p><p>To tell KubeVela which one is the main workload, you must follow these two steps:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-declare-main-workloads-resource-definition"></a>1. Declare main workload&#x27;s resource definition<a class="hash-link" href="#1-declare-main-workloads-resource-definition" title="Direct link to heading">#</a></h4><p>The field <code>.spec.definitionRef</code> in <code>WorkloadDefinition</code> is used to record the
resource definition of the main workload.
The name should be in the format: <code>&lt;resource&gt;.&lt;group&gt;</code>. </p><p>For example, the Deployment resource should be defined as:</p><div class="codeBlockContent_3z4W"><div tabindex="0" class="prism-code language-yaml codeBlock_6upA thin-scrollbar"><div class="codeBlockLines_xlV7" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i">Copy</button></div><p>The CloneSet workload resource should be defined as:</p><div class="codeBlockContent_3z4W"><div tabindex="0" class="prism-code language-yaml codeBlock_6upA thin-scrollbar"><div class="codeBlockLines_xlV7" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clonesets.apps.kruise.io</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1alpha1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i">Copy</button></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-qualified-full-name-of-the-main-workload"></a>2. Qualified full name of the main workload<a class="hash-link" href="#2-qualified-full-name-of-the-main-workload" title="Direct link to heading">#</a></h4><p>The name of the main workload should be templated with <a href="https://github.com/helm/helm/blob/543364fba59b0c7c30e38ebe0f73680db895abb6/pkg/chartutil/create.go#L415" target="_blank" rel="noopener noreferrer">a default fully
qualified app
name</a>. DO NOT assign any value to <code>.Values.fullnameOverride</code>.</p><blockquote><p>Also, Helm highly recommend that new charts are created via <code>$ helm create</code> command so the template names are automatically defined as per this best practice.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="upgrade-the-application"></a>Upgrade the application<a class="hash-link" href="#upgrade-the-application" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rollout-strategy"></a>Rollout strategy<a class="hash-link" href="#rollout-strategy" title="Direct link to heading">#</a></h4><p>For now, Helm based components cannot benefit from <a href="https://github.com/oam-dev/kubevela/blob/master/design/vela-core/rollout-design.md#applicationdeployment-workflow" target="_blank" rel="noopener noreferrer">application level rollout strategy</a>.</p><p>So currently in-place upgrade by modifying the application specification directly is the only way to upgrade the Helm based components, no advanced rollout strategy can be assigned to it. Please check <a href="/kubevela.io/docs/next/platform-builder-guide/using-helm/trait#update-an-applicatiion">this sample</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="changing-settings-will-trigger-helm-release-upgrade"></a>Changing <code>settings</code> will trigger Helm release upgrade<a class="hash-link" href="#changing-settings-will-trigger-helm-release-upgrade" title="Direct link to heading">#</a></h4><p>For Helm based component, <code>.spec.components.settings</code> is the way user override the default values of the chart, so any changes applied to <code>settings</code> will trigger a Helm release upgrade.</p><p>This process is handled by Helm and <code>Flux2/helm-controller</code>, hence you can define remediation
strategies in the schematic according to <a href="https://github.com/fluxcd/helm-controller/blob/main/docs/api/helmrelease.md#upgraderemediation" target="_blank" rel="noopener noreferrer">fluxcd/helmrelease API
doc</a>
and <a href="https://toolkit.fluxcd.io/components/helm/helmreleases/#configuring-failure-remediation" target="_blank" rel="noopener noreferrer">spec doc</a>
in case failure happens during this upgrade.</p><p>For example</p><div class="codeBlockContent_3z4W"><div tabindex="0" class="prism-code language-yaml codeBlock_6upA thin-scrollbar"><div class="codeBlockLines_xlV7" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">chart</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">helm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">release</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">chart</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">chart</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;podinfo&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;5.1.4&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">upgrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">remediation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">retries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">remediationStrategy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rollback</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">repository</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http://oam.dev/catalog/&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i">Copy</button></div><blockquote><p>Note: currently, it&#x27;s hard to get helpful information of a living Helm release to figure out what happened if upgrading failed. We will enhance the observability to help users track the situation of Helm release in application level.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="changing-traits-may-make-pods-restart"></a>Changing <code>traits</code> may make Pods restart<a class="hash-link" href="#changing-traits-may-make-pods-restart" title="Direct link to heading">#</a></h4><p>Traits work on Helm based component in the same way as CUE based component, i.e. changes on traits may impact the main workload instance. Hence, the Pods belonging to this workload instance may restart twice during upgrade, one is by the Helm upgrade, and the other one is caused by traits.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/platform-builder-guide/using-helm/known-issues.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/trait"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Attach Traits</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kubevela.io/docs/next/developer-experience-guide/appfile/quick-start-appfile"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#limitations-and-known-issues" class="table-of-contents__link">Limitations and Known Issues</a></li><li><a href="#only-one-main-workload-in-the-chart" class="table-of-contents__link">Only one main workload in the chart</a></li><li><a href="#upgrade-the-application" class="table-of-contents__link">Upgrade the application</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a href="https://kubevela.io/docs/getting-started/install" target="_blank" rel="noopener noreferrer" class="footer__link-item">Getting Started</a></li><li class="footer__item"><a href="https://kubevela.io/docs/platform-builder-guide/design-abstraction/overview" target="_blank" rel="noopener noreferrer" class="footer__link-item">Platform Builder Guide</a></li><li class="footer__item"><a href="https://kubevela.io/docs/developer-experience-guide/appfile/quick-start-appfile" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Experience Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://wj.qq.com/s2/7438465/6bd6" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/kubevela.io/docs/next/platform-builder-guide/using-helm/">DingTalk (23310022)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/kubevela.io/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2021 | Documentation Distributed under <a herf="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong>
        <br>
      </div></div></div></footer></div>
<script src="/kubevela.io/assets/js/styles.19854286.js"></script>
<script src="/kubevela.io/assets/js/runtime~main.92ebaa8a.js"></script>
<script src="/kubevela.io/assets/js/main.9556a67d.js"></script>
<script src="/kubevela.io/assets/js/1.ae7e8fff.js"></script>
<script src="/kubevela.io/assets/js/2.0d1bb0bc.js"></script>
<script src="/kubevela.io/assets/js/191.4c18a2e3.js"></script>
<script src="/kubevela.io/assets/js/935f2afb.935ec562.js"></script>
<script src="/kubevela.io/assets/js/17896441.732353c2.js"></script>
<script src="/kubevela.io/assets/js/4b2cb9b9.3792f2d7.js"></script>
</body>
</html>