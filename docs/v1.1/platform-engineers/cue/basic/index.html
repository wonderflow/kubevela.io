<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KubeVela Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GLR1Y52M7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5GLR1Y52M7",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="KubeVela" href="/opensearch.xml"><title data-react-helmet="true">Learning CUE | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/docs/v1.1/platform-engineers/cue/basic"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v1.1"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v1.1"><meta data-react-helmet="true" property="og:title" content="Learning CUE | KubeVela"><meta data-react-helmet="true" name="description" content="This document will explain more about how to use CUE to encapsulate and abstract a given capability in Kubernetes in detail."><meta data-react-helmet="true" property="og:description" content="This document will explain more about how to use CUE to encapsulate and abstract a given capability in Kubernetes in detail."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/docs/v1.1/platform-engineers/cue/basic"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/v1.1/platform-engineers/cue/basic" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/docs/v1.1/platform-engineers/cue/basic" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/v1.1/platform-engineers/cue/basic" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e34c5d79.css">
<link rel="preload" href="/assets/js/runtime~main.68edf644.js" as="script">
<link rel="preload" href="/assets/js/main.41c398a3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/v1.1/">v1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/platform-engineers/cue/basic">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v1.1/platform-engineers/cue/basic">v1.1</a></li><li><a class="dropdown__link" href="/docs/platform-engineers/cue/basic">v1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/v1.1/platform-engineers/cue/basic" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/v1.1/platform-engineers/cue/basic" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li><li><a class="dropdown__link" href="/blog/kubevela-official-documentation-translation-event">Help Us Translate</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-githab-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/platform-engineers/cue/basic">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/v1.1/platform-engineers/cue/basic">v1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/platform-engineers/cue/basic">v1.0</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/v1.1/platform-engineers/cue/basic" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/docs/v1.1/platform-engineers/cue/basic" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/kubevela-official-documentation-translation-event">Help Us Translate</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-githab-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/">Introduction</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/concepts">How it Works</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Application Team Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/end-user/application">Application</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/components/webservice">Web Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/components/task">Task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/components/worker">Worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/components/cloud-services">Cloud Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/components/more">Want More?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Traits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/ingress">Ingress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/scaler">Manual Scaling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/annotations-and-labels">Labels and Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/sidecar">Attaching Sidecar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/volumes">Cloud Volumes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/service-binding">Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/traits/more">Want More?</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/end-user/scopes/appdeploy">Placement</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/end-user/scopes/rollout-plan">Rollout Plan</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Observability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/scopes/health">Aggregated Health Probe</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Debugging</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/end-user/debug">Dry-Run and Live-Diff</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Platform Team Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/platform-engineers/overview">Resource Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/platform-engineers/definition-and-templates">Definition Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/platform-engineers/openapi-v3-json-schema">Generating UI Forms</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Defining Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">CUE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.1/platform-engineers/cue/component">How-to</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/v1.1/platform-engineers/cue/basic">Learning CUE</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Helm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/helm/component">How-to</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/helm/trait">Attach Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/helm/known-issues">Known Limitations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Simple Template</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/kube/component">How-to</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/kube/trait">Attach Traits</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Cloud Services</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/cloud-services">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/terraform">Terraform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/crossplane">Crossplane</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Defining Traits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/cue/trait">How-to</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/cue/patch-trait">Patch Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/cue/status">Status Write Back</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/cue/advanced">Advanced Features</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Hands-on Lab</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/debug-test-cue">Debug, Test and Dry-run</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/platform-engineers/keda">KEDA as Autoscaling Trait</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Using KubeVela CLI</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Appfile</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/quick-start-appfile">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/learn-appfile">Learning Appfile</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Managing Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/config-enviroments">Setting Up Deployment Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/port-forward">Port Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/check-logs">Check Application Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/exec-cmd">Execute Commands in Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/cap-center">Managing Capabilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/config-app">Configuring data/env in Application</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_components">vela components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_config">vela config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_env">vela env</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_init">vela init</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_up">vela up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_version">vela version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_exec">vela exec</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_logs">vela logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_ls">vela ls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_port-forward">vela port-forward</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_show">vela show</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_status">vela status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_workloads">vela workloads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_traits">vela traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_system">vela system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_template">vela template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/cli/vela_cap">vela cap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/developers/references/kubectl-plugin">Kubectl plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/roadmap/README">KubeVela Roadmap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/v1.1/advanced-install">Other Install Topics</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.1/developers/references/devex/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for KubeVela <strong>v1.1</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/platform-engineers/cue/basic">latest version</a></strong> (v1.0).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: v1.1</span></div><header><h1 class="docTitle_3a4h">Learning CUE</h1></header><div class="markdown"><p>This document will explain more about how to use CUE to encapsulate and abstract a given capability in Kubernetes in detail.</p><blockquote><p>Please make sure you have already learned about <code>Application</code> custom resource before reading the following guide. </p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>The reasons for KubeVela supports CUE as a first-class solution to design abstraction can be concluded as below:</p><ul><li><strong>CUE is designed for large scale configuration.</strong> CUE has the ability to understand a
configuration worked on by engineers across a whole company and to safely change a value that modifies thousands of objects in a configuration. This aligns very well with KubeVela&#x27;s original goal to define and ship production level applications at web scale.</li><li><strong>CUE supports first-class code generation and automation.</strong> CUE can integrate with existing tools and workflows naturally while other tools would have to build complex custom solutions. For example, generate OpenAPI schemas with Go code. This is how KubeVela build developer tools and GUI interfaces based on the CUE templates.</li><li><strong>CUE integrates very well with Go.</strong>
KubeVela is built with GO just like most projects in Kubernetes system. CUE is also implemented in and exposes a rich API in Go. KubeVela integrates with CUE as its core library and works as a Kubernetes controller. With the help of CUE, KubeVela can easily handle data constraint problems.</li></ul><blockquote><p>Pleas also check <a href="https://blog.cedriccharly.com/post/20191109-the-configuration-complexity-curse/" target="_blank" rel="noopener noreferrer">The Configuration Complexity Curse</a> and <a href="https://cuelang.org/docs/concepts/logic/" target="_blank" rel="noopener noreferrer">The Logic of CUE</a> for more details.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>Please make sure below CLIs are present in your environment:</p><ul><li><a href="https://cuelang.org/docs/install/" target="_blank" rel="noopener noreferrer"><code>cue</code> &gt;=v0.2.2</a></li><li><a href="/docs/v1.1/install#3-get-kubevela-cli"><code>vela</code> (&gt;v1.0.0)</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cue-cli-basic"></a>CUE CLI Basic<a class="hash-link" href="#cue-cli-basic" title="Direct link to heading">#</a></h2><p>Below is the basic CUE data, you can define both schema and value in the same file with the almost same format:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: 1.5</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: float</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">d: [1, 2, 3]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">g: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    h: &quot;abc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">e: string</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>CUE is a superset of JSON, we can use it like json with following convenience:</p><ul><li>C style comments,</li><li>quotes may be omitted from field names without special characters,</li><li>commas at the end of fields are optional,</li><li>comma after last element in list is allowed,</li><li>outer curly braces are optional.</li></ul><p>CUE has powerful CLI commands. Let&#x27;s keep the data in a file named <code>first.cue</code> and try. </p><ul><li><p>Format the CUE file. If you&#x27;re using Goland or similar JetBrains IDE,
you can <a href="https://wonderflow.info/posts/2020-11-02-goland-cuelang-format/" target="_blank" rel="noopener noreferrer">configure save on format</a> instead.
This command will not only format the CUE, but also point out the wrong schema. That&#x27;s very useful.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token function" style="color:rgb(80, 250, 123)">fmt</span><span class="token plain"> first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Schema Check, besides <code>cue fmt</code>, you can also use <code>cue vet</code> to check schema.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue vet first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Calculate/Render the result. <code>cue eval</code> will calculate the CUE file and render out the result.
You can see the results don&#x27;t contain <code>a: float</code> and <code>b: int</code>, because these two variables are calculated.
While the <code>e: string</code> doesn&#x27;t have definitive results, so it keeps as it is.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">eval</span><span class="token plain"> first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: 1.5</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">d: [1, 2, 3]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">g: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">h: &quot;abc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">e: string</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Render for specified result. For example, we want only know the result of <code>b</code> in the file, then we can specify the parameter <code>-e</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">eval</span><span class="token plain"> -e b first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Export the result. <code>cue export</code> will export the result with final value. It will report an error if some variables are not definitive.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">e: cannot convert incomplete value &quot;string&quot; to JSON:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ./first.cue:9:4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We can complete the value by giving a value to <code>e</code>, for example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;e: </span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">abc</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then, the command will work. By default, the result will be rendered in json format.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;a&quot;: 1.5,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;b&quot;: 1,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;d&quot;: [</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        1,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        2,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        3</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ],</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;g&quot;: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;h&quot;: &quot;abc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;e&quot;: &quot;abc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Export the result in YAML format.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> first.cue --out yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: 1.5</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">d:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">- 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">- 2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">- 3</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">g:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  h: abc</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">e: abc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Export the result for specified variable.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> -e g first.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;h&quot;: &quot;abc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul><p>For now, you have learned all useful CUE cli operations.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cue-language-basic"></a>CUE Language Basic<a class="hash-link" href="#cue-language-basic" title="Direct link to heading">#</a></h2><ul><li>Data structure: Below is the basic data structure of CUE.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">// float</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: </span><span class="token number">1.5</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">c: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;blahblahblah&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// array</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">d: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token plain">, </span><span class="token number">2</span><span class="token plain">, </span><span class="token number">3</span><span class="token plain">, </span><span class="token number">1</span><span class="token plain">, </span><span class="token number">2</span><span class="token plain">, </span><span class="token number">3</span><span class="token plain">, </span><span class="token number">1</span><span class="token plain">, </span><span class="token number">2</span><span class="token plain">, </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// bool</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">e: </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// struct</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">f: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    a: </span><span class="token number">1.5</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    b: </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    d: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token plain">, </span><span class="token number">2</span><span class="token plain">, </span><span class="token number">3</span><span class="token plain">, </span><span class="token number">1</span><span class="token plain">, </span><span class="token number">2</span><span class="token plain">, </span><span class="token number">3</span><span class="token plain">, </span><span class="token number">1</span><span class="token plain">, </span><span class="token number">2</span><span class="token plain">, </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    g: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        h: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;abc&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// null</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">j: null</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Define a custom CUE type. You can use a <code>#</code> symbol to specify some variable represents a CUE type.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">#abc: string</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s name it <code>second.cue</code>. Then the <code>cue export</code> won&#x27;t complain as the <code>#abc</code> is a type not incomplete value.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> second.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">{}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can also define a more complex custom struct, such as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">#abc: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  x: int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  y: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  z: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    a: float</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    b: bool</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It&#x27;s widely used in KubeVela to define templates and do validation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cue-templating-and-references"></a>CUE Templating and References<a class="hash-link" href="#cue-templating-and-references" title="Direct link to heading">#</a></h2><p>Let&#x27;s try to define a CUE template with the knowledge just learned.</p><ol><li>Define a struct variable <code>parameter</code>.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s save it in a file called <code>deployment.cue</code>.</p><ol start="2"><li>Define a more complex struct variable <code>template</code> and reference the variable <code>parameter</code>.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    kind:       &quot;Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        selector: matchLabels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;app.oam.dev/component&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            metadata: labels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;app.oam.dev/component&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }}}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>People who are familiar with Kubernetes may have understood that is a template of K8s Deployment. The <code>parameter</code> part
is the parameters of the template.</p><p>Add it into the <code>deployment.cue</code>.</p><ol start="4"><li>Then, let&#x27;s add the value by adding following code block:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter:{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   name: &quot;mytest&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   image: &quot;nginx:v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="5"><li>Finally, let&#x27;s export it in yaml:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> deployment.cue -e template --out yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: apps/v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Deployment</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  template:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      containers:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      - name: mytest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        image: nginx:v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      labels:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        app.oam.dev/component: mytest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  selector:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    matchLabels:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      app.oam.dev/component: mytest</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="advanced-cue-schematic"></a>Advanced CUE Schematic<a class="hash-link" href="#advanced-cue-schematic" title="Direct link to heading">#</a></h2><ul><li><p>Open struct and list. Using <code>...</code> in a list or struct means the object is open.</p><ul><li>A list like <code>[...string]</code> means it can hold multiple string elements.
If we don&#x27;t add <code>...</code>, then <code>[string]</code> means the list can only have one <code>string</code> element in it.</li><li>A struct like below means the struct can contain unknown fields. <div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  abc: string   </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul></li><li><p>Operator  <code>|</code>, it represents a value could be both case. Below is an example that the variable <code>a</code> could be in string or int type.</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: string </span><span class="token operator">|</span><span class="token plain"> int</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Default Value, we can use <code>*</code> symbol to represent a default value for variable. That&#x27;s usually used with <code>|</code>,
which represents a default value for some type. Below is an example that variable <code>a</code> is <code>int</code> and it&#x27;s default value is <code>1</code>.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: *1 </span><span class="token operator">|</span><span class="token plain"> int</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Optional Variable. In some cases, a variable could not be used, they&#x27;re optional variables, we can use <code>?:</code> to define it.
In the below example, <code>a</code> is an optional variable, <code>x</code> and <code>z</code> in <code>#my</code> is optional while <code>y</code> is a required variable.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a ?: int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">#my: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">x ?: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">y : int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">z ?:float</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Optional variables can be skipped, that usually works together with conditional logic.
Specifically, if some field does not exit, the CUE grammar is <code>if _variable_ != _|_</code>, the example is like below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    config?: [...#Config]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            if parameter.config != _|_ {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                config: parameter.config</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Operator  <code>&amp;</code>, it used to calculate two variables.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: *1 </span><span class="token operator">|</span><span class="token plain"> int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">c: a </span><span class="token operator">&amp;</span><span class="token plain"> b</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Saving it in <code>third.cue</code> file.</p><p>You can evaluate the result by using <code>cue eval</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">eval</span><span class="token plain"> third.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">a: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">b: 3</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">c: 3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Conditional statement, it&#x27;s really useful when you have some cascade operations that different value affects different results.
So you can do <code>if..else</code> logic in the template.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">price: number</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">feel: *</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;good&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Feel bad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> price is too high</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> price </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    feel: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;bad&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">price: </span><span class="token number">200</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Saving it in <code>fourth.cue</code> file.</p><p>You can evaluate the result by using <code>cue eval</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">eval</span><span class="token plain"> fourth.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><div tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">price: 200</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">feel:  &quot;bad&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Another example is to use bool type as prameter.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:   string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    useENV: bool</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            if parameter.useENV == true {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                env: [{name: &quot;my-env&quot;, value: &quot;my-value&quot;}]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>For Loop: if you want to avoid duplicate, you may want to use for loop.<ul><li><p>Loop for Map</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cue"><div tabindex="0" class="prism-code language-cue codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    env: [string]: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            env: [</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                for k, v in parameter.env {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  k</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    value: v</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                },</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            ]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Loop for type</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">#a: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;hello&quot;: &quot;Barcelona&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;nihao&quot;: &quot;Shanghai&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">for k, v in #a {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;\(k)&quot;: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        nameLen: len(v)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        value:   v</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Loop for Slice</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cue"><div tabindex="0" class="prism-code language-cue codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    env: [...{name:string,value:string}]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">     spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            env: [</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                for _, v in parameter.env {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  v.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    value: v.value</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                },</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            ]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul></li></ul><p>Note that we use <code>&quot;\( _my-statement_ )&quot;</code> for inner calculation in string.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-cue-internal-packages"></a>Import CUE Internal Packages<a class="hash-link" href="#import-cue-internal-packages" title="Direct link to heading">#</a></h2><p>CUE has many <a href="https://pkg.go.dev/cuelang.org/go@v0.2.2/pkg" target="_blank" rel="noopener noreferrer">internal packages</a> which also can be used in KubeVela.</p><p>Below is an example that use <code>strings.Join</code> to <code>concat</code> string list to one string. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cue"><div tabindex="0" class="prism-code language-cue codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">import (&quot;strings&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    outputs: [{ip: &quot;1.1.1.1&quot;, hostname: &quot;xxx.com&quot;}, {ip: &quot;2.2.2.2&quot;, hostname: &quot;yyy.com&quot;}]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        if len(parameter.outputs) &gt; 0 {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            _x: [ for _, v in parameter.outputs {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;\(v.ip) \(v.hostname)&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            message: &quot;Visiting URL: &quot; + strings.Join(_x, &quot;&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-kube-package"></a>Import Kube Package<a class="hash-link" href="#import-kube-package" title="Direct link to heading">#</a></h2><p>KubeVela automatically generates all K8s resources as internal packages by reading K8s openapi from the
installed K8s cluster.</p><p>You can use these packages with the format <code>kube/&lt;apiVersion&gt;</code> in CUE Template of KubeVela just like the same way
with the CUE internal packages.</p><p>For example, <code>Deployment</code> can be used as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cue"><div tabindex="0" class="prism-code language-cue codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">import (</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">   apps &quot;kube/apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: apps.#Deployment</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata: name: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Service can be used as (import package with an alias is not necessary):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cue"><div tabindex="0" class="prism-code language-cue codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">import (&quot;kube/v1&quot;)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: v1.#Service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;name&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: type: &quot;ClusterIP&quot;,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  &quot;myapp&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Even the installed CRD works:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">import (</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  oam  &quot;kube/core.oam.dev/v1alpha2&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: oam.#Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;name&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  &quot;myapp&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oam-dev/kubevela/edit/master/docs/en/platform-engineers/cue/basic.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-06-21T02:27:21.000Z" class="lastUpdatedDate_1WI_">6/21/2021</time> by <strong>kubevela-bot</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/v1.1/platform-engineers/cue/component"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« How-to</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/v1.1/platform-engineers/helm/component"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How-to Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#cue-cli-basic" class="table-of-contents__link">CUE CLI Basic</a></li><li><a href="#cue-language-basic" class="table-of-contents__link">CUE Language Basic</a></li><li><a href="#cue-templating-and-references" class="table-of-contents__link">CUE Templating and References</a></li><li><a href="#advanced-cue-schematic" class="table-of-contents__link">Advanced CUE Schematic</a></li><li><a href="#import-cue-internal-packages" class="table-of-contents__link">Import CUE Internal Packages</a></li><li><a href="#import-kube-package" class="table-of-contents__link">Import Kube Package</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/install">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/platform-engineers/overview">Platform Team Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/end-user/application">Application Team Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v1.1/platform-engineers/cue/">DingTalk (23310022)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2021 | Documentation Distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
        <br>
        Â© 2021 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.68edf644.js"></script>
<script src="/assets/js/main.41c398a3.js"></script>
</body>
</html>