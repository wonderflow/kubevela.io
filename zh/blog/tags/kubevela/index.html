<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="KubeVela Blog Atom Feed"><title data-react-helmet="true">Posts tagged &quot;kubevela&quot; | KubeVela</title><meta data-react-helmet="true" property="og:title" content="Posts tagged &quot;kubevela&quot; | KubeVela"><meta data-react-helmet="true" name="description" content="Blog | Tagged &quot;kubevela&quot;"><meta data-react-helmet="true" property="og:description" content="Blog | Tagged &quot;kubevela&quot;"><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/zh/blog/tags/kubevela"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-react-helmet="true" property="og:image" content="https://tva1.sinaimg.cn/large/ad5fbf65gy1glgj5q8inej208g049aa6.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://tva1.sinaimg.cn/large/ad5fbf65gy1glgj5q8inej208g049aa6.jpg"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/zh/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/zh/blog/tags/kubevela"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/blog/tags/kubevela" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/blog/tags/kubevela" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/blog/tags/kubevela" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.1d69bae9.css">
<link rel="preload" href="/zh/assets/js/styles.3f20afd4.js" as="script">
<link rel="preload" href="/zh/assets/js/runtime~main.884fc18b.js" as="script">
<link rel="preload" href="/zh/assets/js/main.08e887b9.js" as="script">
<link rel="preload" href="/zh/assets/js/1.89bb97b5.js" as="script">
<link rel="preload" href="/zh/assets/js/2.462ea471.js" as="script">
<link rel="preload" href="/zh/assets/js/3.d316d69f.js" as="script">
<link rel="preload" href="/zh/assets/js/6875c492.8f6bf776.js" as="script">
<link rel="preload" href="/zh/assets/js/34dd6e82.b455d1ee.js" as="script">
<link rel="preload" href="/zh/assets/js/33713896.8fb82b92.js" as="script">
<link rel="preload" href="/zh/assets/js/111d754a.c14d8bfd.js" as="script">
<link rel="preload" href="/zh/assets/js/dcd7855b.5fbb5881.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a class="navbar__item navbar__link" href="/zh/docs/">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/zh/docs/">v1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/">Next</a></li><li><a class="dropdown__link" href="/zh/docs/">v1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/blog/tags/kubevela" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh/blog/tags/kubevela" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ç®€ä½“ä¸­æ–‡</a></li><li><a class="dropdown__link" href="/zh/blog/kubevela-official-documentation-translation-event">Help Us Translate</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-githab-link"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/zh/docs/next/">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/">v1.0</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/">æ–‡æ¡£</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/zh/blog">åšå®¢</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/blog/tags/kubevela" target="_self" rel="noopener noreferrer" class="menu__link">English</a></li><li class="menu__list-item"><a href="/zh/blog/tags/kubevela" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">ç®€ä½“ä¸­æ–‡</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/blog/kubevela-official-documentation-translation-event">Help Us Translate</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-githab-link"></a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_2ahu thin-scrollbar"><h3 class="sidebarItemTitle_2hhb">Recent posts</h3><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/extend-kubevela-by-cuelang-in-20-mins">å¦‚ä½•åœ¨ 20 åˆ†é’Ÿå†…ç»™ä½ çš„ K8s PaaS ä¸Šçº¿ä¸€ä¸ªæ–°åŠŸèƒ½</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/kubevela-official-documentation-translation-event">KubeVela å®˜æ–¹æ–‡æ¡£ç¿»è¯‘æ´»åŠ¨</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/kubevela-the-extensible-app-platform-based-on-open-application-model-and-kubernetes">KubeVela æ­£å¼å¼€æºï¼šä¸€ä¸ªé«˜å¯æ‰©å±•çš„äº‘åŸç”Ÿåº”ç”¨å¹³å°ä¸æ ¸å¿ƒå¼•æ“</a></li></ul></div></div><main class="col col--7"><h1>One post tagged with &quot;kubevela&quot;</h1><a href="/zh/blog/tags">View All Tags</a><div class="margin-vert--xl"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/zh/blog/extend-kubevela-by-cuelang-in-20-mins">å¦‚ä½•åœ¨ 20 åˆ†é’Ÿå†…ç»™ä½ çš„ K8s PaaS ä¸Šçº¿ä¸€ä¸ªæ–°åŠŸèƒ½</a></h2><div class="margin-vert--md"><time datetime="2021-04-29T03:16:53.874Z" class="blogPostDate_fNvV">April 29, 2021 Â· One min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/wonderflow" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/2173670?s=200&amp;v=4" alt="wonderflow"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/wonderflow" target="_blank" rel="noopener noreferrer">wonderflow</a></h4><small class="avatar__subtitle">OAM/KubeVela maintainer</small></div></div></header><div class="markdown"><blockquote><p>2020å¹´12æœˆ14æ—¥ 19:33, by @wonderflow</p></blockquote><p>ä¸Šä¸ªæœˆï¼Œ<a href="https://kubevela.io/#/blog/zh/kubevela-the-extensible-app-platform-based-on-open-application-model-and-kubernetes" target="_blank" rel="noopener noreferrer">KubeVela æ­£å¼å‘å¸ƒ</a>äº†ï¼Œ
ä½œä¸ºä¸€æ¬¾ç®€å•æ˜“ç”¨ä¸”é«˜åº¦å¯æ‰©å±•çš„åº”ç”¨ç®¡ç†å¹³å°ä¸æ ¸å¿ƒå¼•æ“ï¼Œå¯ä»¥è¯´æ˜¯å¹¿å¤§å¹³å°å·¥ç¨‹å¸ˆç”¨æ¥æ„å»ºè‡ªå·±çš„äº‘åŸç”Ÿ PaaS çš„ç¥å…µåˆ©å™¨ã€‚
é‚£ä¹ˆæœ¬æ–‡å°±ä»¥ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œè®²è§£ä¸€ä¸‹å¦‚ä½•åœ¨ 20 åˆ†é’Ÿå†…ï¼Œä¸ºä½ åŸºäº KubeVela çš„ PaaS â€œä¸Šçº¿â€œä¸€ä¸ªæ–°èƒ½åŠ›ã€‚</p><p>åœ¨æ­£å¼å¼€å§‹æœ¬æ–‡æ¡£çš„æ•™ç¨‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ æœ¬åœ°å·²ç»æ­£ç¡®<a href="https://kubevela.io/#/en/install" target="_blank" rel="noopener noreferrer">å®‰è£…äº† KubeVela</a> åŠå…¶ä¾èµ–çš„ K8s ç¯å¢ƒã€‚</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevela-æ‰©å±•çš„åŸºæœ¬ç»“æ„"></a>KubeVela æ‰©å±•çš„åŸºæœ¬ç»“æ„<a class="hash-link" href="#kubevela-æ‰©å±•çš„åŸºæœ¬ç»“æ„" title="Direct link to heading">#</a></h1><p>KubeVela çš„åŸºæœ¬æ¶æ„å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://kubevela-docs.oss-cn-beijing.aliyuncs.com/kubevela-extend.jpg" alt="image"></p><p>ç®€å•æ¥è¯´ï¼ŒKubeVela é€šè¿‡æ·»åŠ  <strong>Workload Type</strong> å’Œ <strong>Trait</strong> æ¥ä¸ºç”¨æˆ·æ‰©å±•èƒ½åŠ›ï¼Œå¹³å°çš„æœåŠ¡æä¾›æ–¹é€šè¿‡ Definition æ–‡ä»¶æ³¨å†Œå’Œæ‰©å±•ï¼Œå‘ä¸Šé€šè¿‡ Appfile é€å‡ºæ‰©å±•çš„åŠŸèƒ½ã€‚å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿåˆ†åˆ«ç»™å‡ºäº†åŸºæœ¬çš„ç¼–å†™æµç¨‹ï¼Œå…¶ä¸­2ä¸ªæ˜¯Workloadçš„æ‰©å±•ä¾‹å­ï¼Œä¸€ä¸ªæ˜¯Traitçš„æ‰©å±•ä¾‹å­ï¼š</p><ul><li><a href="https://kubevela.io/#/en/platform-engineers/workload-type" target="_blank" rel="noopener noreferrer">OpenFaaS ä¸ºä¾‹çš„ Workload Type æ‰©å±•</a></li><li><a href="https://kubevela.io/#/en/platform-engineers/cloud-services" target="_blank" rel="noopener noreferrer">äº‘èµ„æº RDS ä¸ºä¾‹çš„ Workload Type æ‰©å±•</a></li><li><a href="https://kubevela.io/#/en/platform-engineers/trait" target="_blank" rel="noopener noreferrer">KubeWatch ä¸ºä¾‹çš„ Trait æ‰©å±•</a></li></ul><p>æˆ‘ä»¬ä»¥ä¸€ä¸ªå†…ç½®çš„ WorkloadDefinition ä¸ºä¾‹æ¥ä»‹ç»ä¸€ä¸‹ Definition æ–‡ä»¶çš„åŸºæœ¬ç»“æ„ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;`Webservice` is a workload type to describe long</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">running</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> scalable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> containerized services that have a stable network endpoint to receive external network traffic from customers.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    If workload type is skipped for any service defined in Appfile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it will be defaulted to `Web Service` type.&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        kind:       &quot;Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            selector: matchLabels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                &quot;app.oam.dev/component&quot;: context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                metadata: labels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    &quot;app.oam.dev/component&quot;: context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        name:  context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        if parameter[&quot;cmd&quot;] != _|_ {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            command: parameter.cmd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        if parameter[&quot;env&quot;] != _|_ {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            env: parameter.env</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        if context[&quot;config&quot;] != _|_ {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            env: context.config</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        ports: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            containerPort: parameter.port</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        if parameter[&quot;cpu&quot;] != _|_ {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            resources: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                                limits:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                                    cpu: parameter.cpu</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                                requests:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                                    cpu: parameter.cpu</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            }}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            }}}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">      parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        // +usage=Which image would you like to use for your service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        // +short=i</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        image: string</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +usage=Commands to run in the container</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cmd?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +usage=Which port do you want customer traffic sent to</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +short=p</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">*80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +usage=Define arguments by using environment variables</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">env?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Environment variable name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=The value of the environment variable</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">value?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Specifies a source the value of this var should come from</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">valueFrom?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                // +usage=Selects a key of a secret in the pod&#x27;s namespace</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    // +usage=The name of the secret in the pod&#x27;s namespace to select from</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    // +usage=The key of the secret to select from. Must be a valid secret key</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +usage=Number of CPU units for the service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> like `0.5` (0.5 CPU core)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `1` (1 CPU core)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cpu?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¹ä¸€çœ‹æŒºé•¿çš„ï¼Œå¥½åƒå¾ˆå¤æ‚ï¼Œä½†æ˜¯ä¸è¦ç€æ€¥ï¼Œå…¶å®ç»†çœ‹ä¹‹ä¸‹å®ƒåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ul><li>ä¸å«æ‰©å±•å­—æ®µçš„ Definition æ³¨å†Œéƒ¨åˆ†ã€‚</li><li>ä¾› Appfile ä½¿ç”¨çš„æ‰©å±•æ¨¡æ¿ï¼ˆCUE Templateï¼‰éƒ¨åˆ† </li></ul><p>æˆ‘ä»¬æ‹†å¼€æ¥æ…¢æ…¢ä»‹ç»ï¼Œå…¶å®å­¦èµ·æ¥å¾ˆç®€å•ã€‚</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¸å«æ‰©å±•å­—æ®µçš„-definition-æ³¨å†Œéƒ¨åˆ†"></a>ä¸å«æ‰©å±•å­—æ®µçš„ Definition æ³¨å†Œéƒ¨åˆ†<a class="hash-link" href="#ä¸å«æ‰©å±•å­—æ®µçš„-definition-æ³¨å†Œéƒ¨åˆ†" title="Direct link to heading">#</a></h1><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;`Webservice` is a workload type to describe long</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">running</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> scalable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> containerized services that have a stable network endpoint to receive external network traffic from customers.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    If workload type is skipped for any service defined in Appfile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it will be defaulted to `Web Service` type.&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸€éƒ¨åˆ†æ»¡æ‰“æ»¡ç®—11è¡Œï¼Œå…¶ä¸­æœ‰3è¡Œæ˜¯åœ¨ä»‹ç» <code>webservice</code>çš„åŠŸèƒ½ï¼Œ5è¡Œæ˜¯å›ºå®šçš„æ ¼å¼ã€‚åªæœ‰2è¡Œæ˜¯æœ‰ç‰¹å®šä¿¡æ¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸¤è¡Œçš„æ„æ€ä»£è¡¨äº†è¿™ä¸ªDefinitionèƒŒåç”¨çš„CRDåç§°æ˜¯ä»€ä¹ˆï¼Œå…¶æ ¼å¼æ˜¯ <code>&lt;resources&gt;.&lt;api-group&gt;</code>.äº†è§£ K8s çš„åŒå­¦åº”è¯¥çŸ¥é“ K8s ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯é€šè¿‡ <code>api-group</code>, <code>version</code> å’Œ <code>kind</code> å®šä½èµ„æºï¼Œè€Œ <code>kind</code> åœ¨ K8s restful API ä¸­å¯¹åº”çš„æ˜¯ <code>resources</code>ã€‚ä»¥å¤§å®¶ç†Ÿæ‚‰ <code>Deployment</code> å’Œ <code>ingress</code> ä¸ºä¾‹ï¼Œå®ƒçš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p><table><thead><tr><th>api-group</th><th>kind</th><th>version</th><th>resources</th></tr></thead><tbody><tr><td>apps</td><td>Deployment</td><td>v1</td><td>deployments</td></tr><tr><td>networking.k8s.io</td><td>Ingress</td><td>v1</td><td>ingresses</td></tr></tbody></table><blockquote><p>è¿™é‡Œè¡¥å……ä¸€ä¸ªå°çŸ¥è¯†ï¼Œä¸ºä»€ä¹ˆæœ‰äº† kind è¿˜è¦åŠ ä¸ª resources çš„æ¦‚å¿µå‘¢ï¼Ÿ
å› ä¸ºä¸€ä¸ª CRD é™¤äº† kind æœ¬èº«è¿˜æœ‰ä¸€äº›åƒ statusï¼Œreplica è¿™æ ·çš„å­—æ®µå¸Œæœ›è·Ÿ spec æœ¬èº«è§£è€¦å¼€æ¥åœ¨ restful API ä¸­å•ç‹¬æ›´æ–°ï¼Œ
æ‰€ä»¥ resources é™¤äº† kind å¯¹åº”çš„é‚£ä¸€ä¸ªï¼Œè¿˜ä¼šæœ‰ä¸€äº›é¢å¤–çš„ resourcesï¼Œå¦‚ Deployment çš„ status è¡¨ç¤ºä¸º <code>deployments/status</code>ã€‚</p></blockquote><p>æ‰€ä»¥ç›¸ä¿¡èªæ˜çš„ä½ å·²ç»æ˜ç™½äº†ä¸å« extension çš„æƒ…å†µä¸‹ï¼ŒDefinitionåº”è¯¥æ€ä¹ˆå†™äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ ¹æ® K8s çš„èµ„æºç»„åˆæ–¹å¼æ‹¼æ¥ä¸€ä¸‹ï¼Œåªè¦å¡«ä¸‹é¢ä¸‰ä¸ªå°–æ‹¬å·çš„ç©ºæ ¼å°±å¯ä»¥äº†ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿™é‡Œå†™åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿™é‡Œå†™resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">.&lt;è¿™é‡Œå†™api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>é’ˆå¯¹è¿ç»´ç‰¹å¾æ³¨å†Œï¼ˆTraitDefinitionï¼‰ä¹Ÿæ˜¯è¿™æ ·ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TraitDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿™é‡Œå†™åç§°</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;è¿™é‡Œå†™resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">.&lt;è¿™é‡Œå†™api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ‰€ä»¥æŠŠ <code>Ingress</code> ä½œä¸º KubeVela çš„æ‰©å±•å†™è¿›å»å°±æ˜¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TraitDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  ingress</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingresses.networking.k8s.io</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>é™¤æ­¤ä¹‹å¤–ï¼ŒTraitDefinition ä¸­è¿˜å¢åŠ äº†ä¸€äº›å…¶ä»–åŠŸèƒ½æ¨¡å‹å±‚åŠŸèƒ½ï¼Œå¦‚ï¼š</p><ul><li><code>appliesToWorkloads</code>: è¡¨ç¤ºè¿™ä¸ª trait å¯ä»¥ä½œç”¨äºå“ªäº› Workload ç±»å‹ã€‚</li><li><code>conflictWith</code>ï¼š è¡¨ç¤ºè¿™ä¸ª trait å’Œå“ªäº›å…¶ä»–ç±»å‹çš„ trait æœ‰å†²çªã€‚</li><li><code>workloadRefPath</code>ï¼š è¡¨ç¤ºè¿™ä¸ª trait åŒ…å«çš„ workload å­—æ®µæ˜¯å“ªä¸ªï¼ŒKubeVela åœ¨ç”Ÿæˆ trait å¯¹è±¡æ—¶ä¼šè‡ªåŠ¨å¡«å……ã€‚
... </li></ul><p>è¿™äº›åŠŸèƒ½éƒ½æ˜¯å¯é€‰çš„ï¼Œæœ¬æ–‡ä¸­ä¸æ¶‰åŠä½¿ç”¨ï¼Œåœ¨åç»­çš„å…¶ä»–æ–‡ç« ä¸­æˆ‘ä»¬å†ç»™å¤§å®¶è¯¦ç»†ä»‹ç»ã€‚</p><p>æ‰€ä»¥åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†ä¸€ä¸ªä¸å« extensions çš„åŸºæœ¬æ‰©å±•æ¨¡å¼ï¼Œè€Œå‰©ä¸‹éƒ¨åˆ†å°±æ˜¯å›´ç»• <a href="https://cuelang.org/" target="_blank" rel="noopener noreferrer">CUE</a> çš„æŠ½è±¡æ¨¡æ¿ã€‚</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä¾›-appfile-ä½¿ç”¨çš„æ‰©å±•æ¨¡æ¿ï¼ˆcue-templateï¼‰éƒ¨åˆ†"></a>ä¾› Appfile ä½¿ç”¨çš„æ‰©å±•æ¨¡æ¿ï¼ˆCUE Templateï¼‰éƒ¨åˆ†<a class="hash-link" href="#ä¾›-appfile-ä½¿ç”¨çš„æ‰©å±•æ¨¡æ¿ï¼ˆcue-templateï¼‰éƒ¨åˆ†" title="Direct link to heading">#</a></h1><p>å¯¹ CUE æœ¬èº«æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒè¿™ç¯‡<a href="https://wonderflow.info/posts/2020-12-15-cuelang-template/" target="_blank" rel="noopener noreferrer">CUE åŸºç¡€å…¥é—¨</a> å¤šåšä¸€äº›äº†è§£ï¼Œé™äºç¯‡å¹…æœ¬æ–‡å¯¹ CUE æœ¬èº«ä¸è¯¦ç»†å±•å¼€ã€‚</p><p>å¤§å®¶çŸ¥é“ KubeVela çš„ Appfile å†™èµ·æ¥å¾ˆç®€æ´ï¼Œä½†æ˜¯ K8s çš„å¯¹è±¡æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå¤æ‚çš„ YAMLï¼Œè€Œä¸ºäº†ä¿æŒç®€æ´çš„åŒæ—¶åˆä¸å¤±å¯æ‰©å±•æ€§ï¼ŒKubeVela æä¾›äº†ä¸€ä¸ªä»å¤æ‚åˆ°ç®€æ´çš„æ¡¥æ¢ã€‚
è¿™å°±æ˜¯ Definition ä¸­ CUE Template çš„ä½œç”¨ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cue-æ ¼å¼æ¨¡æ¿"></a>CUE æ ¼å¼æ¨¡æ¿<a class="hash-link" href="#cue-æ ¼å¼æ¨¡æ¿" title="Direct link to heading">#</a></h2><p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ª Deployment çš„ YAML æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­å¾ˆå¤šå†…å®¹éƒ½æ˜¯å›ºå®šçš„æ¡†æ¶ï¼ˆæ¨¡æ¿éƒ¨åˆ†ï¼‰ï¼ŒçœŸæ­£éœ€è¦ç”¨æˆ·å¡«çš„å†…å®¹å…¶å®å°±å°‘é‡çš„å‡ ä¸ªå­—æ®µï¼ˆå‚æ•°éƒ¨åˆ†ï¼‰ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deployment</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">meadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mytest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mytest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> a</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> b</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">app.oam.dev/component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mytest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">app.oam.dev/component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mytest</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨ KubeVela ä¸­ï¼ŒDefinition æ–‡ä»¶çš„å›ºå®šæ ¼å¼å°±æ˜¯åˆ†ä¸º <code>output</code> å’Œ <code>parameter</code> ä¸¤éƒ¨åˆ†ã€‚å…¶ä¸­<code>output</code>ä¸­çš„å†…å®¹å°±æ˜¯â€œæ¨¡æ¿éƒ¨åˆ†â€ï¼Œè€Œ <code>parameter</code> å°±æ˜¯å‚æ•°éƒ¨åˆ†ã€‚</p><p>é‚£æˆ‘ä»¬æ¥æŠŠä¸Šé¢çš„ Deployment YAML æ”¹å†™æˆ Definition ä¸­æ¨¡æ¿çš„æ ¼å¼ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cue"><div tabindex="0" class="prism-code language-cue codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    kind:       &quot;Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    metadata: name: &quot;mytest&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        selector: matchLabels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;app.oam.dev/component&quot;: &quot;mytest&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            metadata: labels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;app.oam.dev/component&quot;: &quot;mytest&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  &quot;mytest&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    image: &quot;nginx:v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    env: [{name:&quot;a&quot;,value:&quot;b&quot;}]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }}}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸ªæ ¼å¼è·Ÿ json å¾ˆåƒï¼Œäº‹å®ä¸Šè¿™ä¸ªæ˜¯ CUE çš„æ ¼å¼ï¼Œè€Œ CUE æœ¬èº«å°±æ˜¯ä¸€ä¸ª json çš„è¶…é›†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCUEçš„æ ¼å¼åœ¨æ»¡è¶³ JSON è§„åˆ™çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€äº›ç®€ä¾¿è§„åˆ™ï¼Œ
ä½¿å…¶æ›´æ˜“è¯»æ˜“ç”¨ï¼š</p><ul><li>C è¯­è¨€çš„æ³¨é‡Šé£æ ¼ã€‚</li><li>è¡¨ç¤ºå­—æ®µåç§°çš„åŒå¼•å·åœ¨æ²¡æœ‰ç‰¹æ®Šç¬¦å·çš„æƒ…å†µä¸‹å¯ä»¥ç¼ºçœã€‚</li><li>å­—æ®µå€¼ç»“å°¾çš„é€—å·å¯ä»¥ç¼ºçœï¼Œåœ¨å­—æ®µæœ€åçš„é€—å·å†™äº†ä¹Ÿä¸ä¼šå‡ºé”™ã€‚</li><li>æœ€å¤–å±‚çš„å¤§æ‹¬å·å¯ä»¥çœç•¥ã€‚</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cue-æ ¼å¼çš„æ¨¡æ¿å‚æ•°--å˜é‡å¼•ç”¨"></a>CUE æ ¼å¼çš„æ¨¡æ¿å‚æ•°--å˜é‡å¼•ç”¨<a class="hash-link" href="#cue-æ ¼å¼çš„æ¨¡æ¿å‚æ•°--å˜é‡å¼•ç”¨" title="Direct link to heading">#</a></h2><p>ç¼–å†™å¥½äº†æ¨¡æ¿éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬æ¥æ„å»ºå‚æ•°éƒ¨åˆ†ï¼Œè€Œè¿™ä¸ªå‚æ•°å…¶å®å°±æ˜¯å˜é‡çš„å¼•ç”¨ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    kind:       &quot;Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        selector: matchLabels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;app.oam.dev/component&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            metadata: labels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;app.oam.dev/component&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }}}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚ä¸Šé¢çš„è¿™ä¸ªä¾‹å­æ‰€ç¤ºï¼ŒKubeVela ä¸­çš„æ¨¡æ¿å‚æ•°å°±æ˜¯é€šè¿‡ <code>parameter</code> è¿™ä¸ªéƒ¨åˆ†æ¥å®Œæˆçš„ï¼Œè€Œ<code>parameter</code> æœ¬è´¨ä¸Šå°±æ˜¯ä½œä¸ºå¼•ç”¨ï¼Œæ›¿æ¢æ‰äº† <code>output</code> ä¸­çš„æŸäº›å­—æ®µã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å®Œæ•´çš„-definition-ä»¥åŠåœ¨-appfile-ä½¿ç”¨"></a>å®Œæ•´çš„ Definition ä»¥åŠåœ¨ Appfile ä½¿ç”¨<a class="hash-link" href="#å®Œæ•´çš„-definition-ä»¥åŠåœ¨-appfile-ä½¿ç”¨" title="Direct link to heading">#</a></h2><p>äº‹å®ä¸Šï¼Œç»è¿‡ä¸Šé¢ä¸¤éƒ¨åˆ†çš„ç»„åˆï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å†™å‡ºä¸€ä¸ªå®Œæ•´çš„ Definition æ–‡ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            kind:       &quot;Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                selector: matchLabels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    &quot;app.oam.dev/component&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                template: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    metadata: labels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        &quot;app.oam.dev/component&quot;: parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        containers: [{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                        }]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    }}}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥é¢„å…ˆåˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€éƒ¨åˆ†æ”¾å‰é¢çš„ yaml éƒ¨åˆ†ï¼Œå‡è®¾å‘½åä¸º <code>def.yaml</code> å¦‚ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  name: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  definitionRef:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  extension:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    template: </span><span class="token operator">|</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦ä¸€ä¸ªåˆ™æ”¾ cue æ–‡ä»¶ï¼Œå‡è®¾å‘½åä¸º <code>def.cue</code> ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    apiVersion: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apps/v1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    kind:       </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Deployment&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        selector: matchLabels: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;app.oam.dev/component&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        template: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            metadata: labels: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;app.oam.dev/component&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å…ˆå¯¹ <code>def.cue</code> åšä¸€ä¸ªæ ¼å¼åŒ–ï¼Œæ ¼å¼åŒ–çš„åŒæ—¶ cue å·¥å…·æœ¬èº«ä¼šåšä¸€äº›æ ¡éªŒï¼Œä¹Ÿå¯ä»¥æ›´æ·±å…¥çš„<a href="https://wonderflow.info/posts/2020-12-15-cuelang-template/" target="_blank" rel="noopener noreferrer">é€šè¿‡ cue å‘½ä»¤åšè°ƒè¯•</a>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">cue </span><span class="token function" style="color:rgb(80, 250, 123)">fmt</span><span class="token plain"> def.cue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è°ƒè¯•å®Œæˆåï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æŠŠè¿™ä¸ª yaml ç»„è£…ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">./hack/vela-templates/mergedef.sh def.yaml def.cue </span><span class="token operator">&gt;</span><span class="token plain"> mydeploy.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å†æŠŠè¿™ä¸ª yaml æ–‡ä»¶ apply åˆ° K8s é›†ç¾¤ä¸­ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl apply -f mydeploy.yaml</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">workloaddefinition.core.oam.dev/mydeploy created</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸€æ—¦æ–°èƒ½åŠ› <code>kubectl apply</code> åˆ°äº† Kubernetes ä¸­ï¼Œä¸ç”¨é‡å¯ï¼Œä¹Ÿä¸ç”¨æ›´æ–°ï¼ŒKubeVela çš„ç”¨æˆ·å¯ä»¥ç«‹åˆ»çœ‹åˆ°ä¸€ä¸ªæ–°çš„èƒ½åŠ›å‡ºç°å¹¶ä¸”å¯ä»¥ä½¿ç”¨äº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela worklaods</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Automatically discover capabilities successfully âœ… Add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> Update</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> Delete</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">TYPE        CATEGORY    DESCRIPTION</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">+mydeploy   workload    description not defined</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">NAME        DESCRIPTION</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">mydeploy    description not defined</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨ Appfile ä¸­ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">extend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">mysvc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crccheck/hello</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">world</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysvc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ‰§è¡Œ <code>vela up</code> å°±èƒ½æŠŠè¿™ä¸ªè¿è¡Œèµ·æ¥äº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela up -f docs/examples/blog-extension/my-extend-app.yaml</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Parsing vela appfile </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Loading templates </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Rendering configs </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mysvc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Writing deploy config to </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">.vela/deploy.yaml</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Applying deploy configs </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Checking </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> app has been deployed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">App has not been deployed, creating a new deployment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">âœ… App has been deployed ğŸš€ğŸš€ğŸš€</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    Port forward: vela port-forward my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             SSH: vela </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">         Logging: vela logs my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      App status: vela status my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  Service status: vela status my-extend-app --svc mysvc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬æ¥æŸ¥çœ‹ä¸€ä¸‹åº”ç”¨çš„çŠ¶æ€ï¼Œå·²ç»æ­£å¸¸è¿è¡Œèµ·æ¥äº†ï¼ˆ<code>HEALTHY Ready: 1/1</code>ï¼‰ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela status my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">About:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  Name:         my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  Namespace:    env-application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  Created at:   </span><span class="token number">2020</span><span class="token plain">-12-15 </span><span class="token number">16</span><span class="token plain">:32:25.08233 +0800 CST</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  Updated at:   </span><span class="token number">2020</span><span class="token plain">-12-15 </span><span class="token number">16</span><span class="token plain">:32:25.08233 +0800 CST</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  - Name: mysvc</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    Type: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    HEALTHY Ready: </span><span class="token number">1</span><span class="token plain">/1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="definition-æ¨¡æ¿ä¸­çš„é«˜çº§ç”¨æ³•"></a>Definition æ¨¡æ¿ä¸­çš„é«˜çº§ç”¨æ³•<a class="hash-link" href="#definition-æ¨¡æ¿ä¸­çš„é«˜çº§ç”¨æ³•" title="Direct link to heading">#</a></h1><p>ä¸Šé¢æˆ‘ä»¬å·²ç»é€šè¿‡æ¨¡æ¿æ›¿æ¢è¿™ä¸ªæœ€åŸºæœ¬çš„åŠŸèƒ½ä½“éªŒäº†æ‰©å±• KubeVela çš„å…¨è¿‡ç¨‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¯èƒ½ä½ è¿˜æœ‰ä¸€äº›æ¯”è¾ƒå¤æ‚çš„éœ€æ±‚ï¼Œå¦‚æ¡ä»¶åˆ¤æ–­ï¼Œå¾ªç¯ï¼Œå¤æ‚ç±»å‹ç­‰ï¼Œéœ€è¦ä¸€äº›é«˜çº§çš„ç”¨æ³•ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç»“æ„ä½“å‚æ•°"></a>ç»“æ„ä½“å‚æ•°<a class="hash-link" href="#ç»“æ„ä½“å‚æ•°" title="Direct link to heading">#</a></h2><p>å¦‚æœæ¨¡æ¿ä¸­æœ‰ä¸€äº›å‚æ•°ç±»å‹æ¯”è¾ƒå¤æ‚ï¼ŒåŒ…å«ç»“æ„ä½“å’ŒåµŒå¥—çš„å¤šä¸ªç»“æ„ä½“ï¼Œå°±å¯ä»¥ä½¿ç”¨ç»“æ„ä½“å®šä¹‰ã€‚</p><ol><li>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ç±»å‹ï¼ŒåŒ…å«1ä¸ªå­—ç¬¦ä¸²æˆå‘˜ã€1ä¸ªæ•´å‹å’Œ1ä¸ªç»“æ„ä½“æˆå‘˜ã€‚</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">#Config: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    value: int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    other: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      key: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      value: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="2"><li>åœ¨å˜é‡ä¸­ä½¿ç”¨è¿™ä¸ªç»“æ„ä½“ç±»å‹ï¼Œå¹¶ä½œä¸ºæ•°ç»„ä½¿ç”¨ã€‚</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    config: [...#Config]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="3"><li>åŒæ ·çš„ç›®æ ‡ä¸­ä¹Ÿæ˜¯ä»¥å˜é‡å¼•ç”¨çš„æ–¹å¼ä½¿ç”¨ã€‚</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    env: parameter.config</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="4"><li>Appfile ä¸­çš„å†™æ³•å°±æ˜¯æŒ‰ç…§ parameter å®šä¹‰çš„ç»“æ„ç¼–å†™ã€‚</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">name: my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  mysvc:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: crccheck/hello-world</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: mysvc</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    config:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    - name: a</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      value: 1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      other:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        key: mykey</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        value: myvalue</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­<a class="hash-link" href="#æ¡ä»¶åˆ¤æ–­" title="Direct link to heading">#</a></h2><p>æœ‰æ—¶å€™æŸäº›å‚æ•°åŠ è¿˜æ˜¯ä¸åŠ å–å†³äºæŸä¸ªæ¡ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:   string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    useENV: bool</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> parameter.useENV </span><span class="token operator">==</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                env: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">name: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;my-env&quot;</span><span class="token plain">, value: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;my-value&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨ Appfile å°±æ˜¯å†™å€¼ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">name: my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  mysvc:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: crccheck/hello-world</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: mysvc</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    useENV: true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å¯ç¼ºçœå‚æ•°"></a>å¯ç¼ºçœå‚æ•°<a class="hash-link" href="#å¯ç¼ºçœå‚æ•°" title="Direct link to heading">#</a></h2><p>æœ‰äº›æƒ…å†µä¸‹å‚æ•°å¯èƒ½å­˜åœ¨ä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼Œå³éå¿…å¡«ï¼Œè¿™ä¸ªæ—¶å€™ä¸€èˆ¬è¦é…åˆæ¡ä»¶åˆ¤æ–­ä½¿ç”¨ï¼Œå¯¹äºæŸä¸ªå­—æ®µä¸å­˜åœ¨çš„æƒ…å†µï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯æ˜¯ <code>_variable != _|_</code>ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    config?: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><span class="token comment" style="color:rgb(98, 114, 164)">#Config]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> parameter.config </span><span class="token operator">!=</span><span class="token plain"> _</span><span class="token operator">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                config: parameter.config</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ç§æƒ…å†µä¸‹ Appfile çš„ config å°±éå¿…å¡«äº†ï¼Œå¡«äº†å°±æ¸²æŸ“ï¼Œæ²¡å¡«å°±ä¸æ¸²æŸ“ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="é»˜è®¤å€¼"></a>é»˜è®¤å€¼<a class="hash-link" href="#é»˜è®¤å€¼" title="Direct link to heading">#</a></h2><p>å¯¹äºæŸäº›å‚æ•°å¦‚æœå¸Œæœ›è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªå†™æ³•ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: *</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;nginx:v1&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸ªæ—¶å€™ Appfile å°±å¯ä»¥ä¸å†™ image è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨ &quot;nginx:v1&quot;ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">name: my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  mysvc:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: mysvc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å¾ªç¯"></a>å¾ªç¯<a class="hash-link" href="#å¾ªç¯" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="map-ç±»å‹çš„å¾ªç¯"></a>Map ç±»å‹çš„å¾ªç¯<a class="hash-link" href="#map-ç±»å‹çš„å¾ªç¯" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    env: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            env: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> k, </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> parameter.env </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  k</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    value: </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Appfile ä¸­çš„å†™æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">name: my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  mysvc:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  &quot;mysvc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    env:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      env1: value1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      env2: value2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ•°ç»„ç±»å‹çš„å¾ªç¯"></a>æ•°ç»„ç±»å‹çš„å¾ªç¯<a class="hash-link" href="#æ•°ç»„ç±»å‹çš„å¾ªç¯" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    env: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">name:string,value:string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  parameter.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            env: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> _, </span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> parameter.env </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    name:  v.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    value: v.value</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Appfile ä¸­çš„å†™æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">name: my-extend-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  mysvc:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    type: mydeploy</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name:  &quot;mysvc&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: &quot;nginx&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    env:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    - name: env1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      value: value1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    - name: env2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      value: value2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevela-å†…ç½®çš„-context-å˜é‡"></a>KubeVela å†…ç½®çš„ <code>context</code> å˜é‡<a class="hash-link" href="#kubevela-å†…ç½®çš„-context-å˜é‡" title="Direct link to heading">#</a></h2><p>å¤§å®¶å¯èƒ½ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨ parameter ä¸­å®šä¹‰çš„ name æ¯æ¬¡åœ¨ Appfileä¸­ å®é™…ä¸Šå†™äº†ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯åœ¨ services ä¸‹é¢ï¼ˆæ¯ä¸ªserviceéƒ½ä»¥åç§°åŒºåˆ†ï¼‰ï¼Œ
å¦ä¸€æ¬¡åˆ™æ˜¯åœ¨å…·ä½“çš„<code>name</code>å‚æ•°é‡Œé¢ã€‚äº‹å®ä¸Šè¿™é‡Œé‡å¤çš„ä¸åº”è¯¥ç”±ç”¨æˆ·å†å†™ä¸€éï¼Œæ‰€ä»¥ KubeVela ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ªå†…ç½®çš„ <code>context</code>ï¼Œé‡Œé¢å­˜æ”¾äº†ä¸€äº›é€šç”¨çš„ç¯å¢ƒä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¦‚åº”ç”¨åç§°ã€ç§˜é’¥ç­‰ã€‚
ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ context å°±ä¸éœ€è¦é¢å¤–å¢åŠ ä¸€ä¸ª <code>name</code> å‚æ•°äº†ï¼Œ KubeVela åœ¨è¿è¡Œæ¸²æŸ“æ¨¡æ¿çš„è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨ä¼ å…¥ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">parameter: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">output: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    spec: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        containers: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            name:  context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            image: parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevela-ä¸­çš„æ³¨é‡Šå¢å¼º"></a>KubeVela ä¸­çš„æ³¨é‡Šå¢å¼º<a class="hash-link" href="#kubevela-ä¸­çš„æ³¨é‡Šå¢å¼º" title="Direct link to heading">#</a></h2><p>KubeVela è¿˜å¯¹ cuelang çš„æ³¨é‡Šåšäº†ä¸€äº›æ‰©å±•ï¼Œæ–¹ä¾¿è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ä»¥åŠè¢« CLI ä½¿ç”¨ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"> parameter: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +usage=Which image would you like to use for your service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +short=i</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        image: string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        // +usage=Commands to run in the container</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        cmd?: [...string]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å…¶ä¸­ï¼Œ<code>+usgae</code> å¼€å¤´çš„æ³¨é‡Šä¼šå˜æˆå‚æ•°çš„è¯´æ˜ï¼Œ<code>+short</code> å¼€å¤´çš„æ³¨é‡Šåé¢åˆ™æ˜¯åœ¨ CLI ä¸­ä½¿ç”¨çš„ç¼©å†™ã€‚</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ€»ç»“"></a>æ€»ç»“<a class="hash-link" href="#æ€»ç»“" title="Direct link to heading">#</a></h1><p>æœ¬æ–‡é€šè¿‡å®é™…çš„æ¡ˆä¾‹å’Œè¯¦ç»†çš„è®²è¿°ï¼Œä¸ºä½ ä»‹ç»äº†åœ¨ KubeVela ä¸­æ–°å¢ä¸€ä¸ªèƒ½åŠ›çš„è¯¦ç»†è¿‡ç¨‹ä¸åŸç†ï¼Œä»¥åŠèƒ½åŠ›æ¨¡æ¿çš„ç¼–å†™æ–¹æ³•ã€‚</p><p>è¿™é‡Œä½ å¯èƒ½è¿˜æœ‰ä¸ªç–‘é—®ï¼Œå¹³å°ç®¡ç†å‘˜è¿™æ ·æ·»åŠ äº†ä¸€ä¸ªæ–°èƒ½åŠ›åï¼Œå¹³å°çš„ç”¨æˆ·åˆè¯¥æ€ä¹ˆèƒ½çŸ¥é“è¿™ä¸ªèƒ½åŠ›æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿå…¶å®ï¼Œåœ¨ KubeVela ä¸­ï¼Œå®ƒä¸ä»…èƒ½æ–¹ä¾¿çš„æ·»åŠ æ–°èƒ½åŠ›ï¼Œ<strong>å®ƒè¿˜èƒ½è‡ªåŠ¨ä¸ºâ€œèƒ½åŠ›â€ç”Ÿæˆ Markdown æ ¼å¼çš„ä½¿ç”¨æ–‡æ¡£ï¼</strong> ä¸ä¿¡ï¼Œä½ å¯ä»¥çœ‹ä¸‹ KubeVela æœ¬èº«çš„å®˜æ–¹ç½‘ç«™ï¼Œæ‰€æœ‰åœ¨ <code>References/Capabilities</code>ç›®å½•ä¸‹èƒ½åŠ›ä½¿ç”¨è¯´æ˜æ–‡æ¡£ï¼ˆæ¯”å¦‚<a href="https://kubevela.io/#/en/developers/references/workload-types/webservice" target="_blank" rel="noopener noreferrer">è¿™ä¸ª</a>ï¼‰ï¼Œå…¨éƒ½æ˜¯æ ¹æ®æ¯ä¸ªèƒ½åŠ›çš„æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆçš„å“¦ã€‚
æœ€åï¼Œæ¬¢è¿å¤§å®¶å†™ä¸€äº›æœ‰è¶£çš„æ‰©å±•åŠŸèƒ½ï¼Œæäº¤åˆ° KubeVela çš„<a href="https://github.com/oam-dev/catalog/tree/master/registry" target="_blank" rel="noopener noreferrer">ç¤¾åŒºä»“åº“</a>ä¸­æ¥ã€‚ </p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/zh/blog/tags/kubevela">kubevela</a></div><div class="col text--right"><a aria-label="Read more about å¦‚ä½•åœ¨ 20 åˆ†é’Ÿå†…ç»™ä½ çš„ K8s PaaS ä¸Šçº¿ä¸€ä¸ªæ–°åŠŸèƒ½" href="/zh/blog/extend-kubevela-by-cuelang-in-20-mins"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_GeHD"><a href="/zh/blog/kubevela-the-extensible-app-platform-based-on-open-application-model-and-kubernetes">KubeVela æ­£å¼å¼€æºï¼šä¸€ä¸ªé«˜å¯æ‰©å±•çš„äº‘åŸç”Ÿåº”ç”¨å¹³å°ä¸æ ¸å¿ƒå¼•æ“</a></h2><div class="margin-vert--md"><time datetime="2021-04-29T03:16:53.874Z" class="blogPostDate_fNvV">April 29, 2021 Â· One min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/resouer" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/1701782?s=200&amp;v=4" alt="Lei Zhang and Fei Guo"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/resouer" target="_blank" rel="noopener noreferrer">Lei Zhang and Fei Guo</a></h4><small class="avatar__subtitle">CNCF TOC Member/Kubernetes</small></div></div></header><div class="markdown"><blockquote><p>2020å¹´12æœˆ7æ—¥ 12:33, by Lei Zhang and Fei Guo</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/ad5fbf65gy1glgj5q8inej208g049aa6.jpg" alt="image"></p><p>ç¾å›½è¥¿éƒ¨æ—¶é—´ 2020 å¹´ 11 æœˆ 18 æ—¥ï¼Œåœ¨äº‘åŸç”ŸæŠ€æœ¯â€œæœ€é«˜ç››å®´â€çš„ KubeCon åŒ—ç¾å³°ä¼š 2020 ä¸Šï¼ŒCNCF åº”ç”¨äº¤ä»˜é¢†åŸŸå°ç»„ï¼ˆCNCF SIG App Delivery) ä¸ Open Application Model (OAM) ç¤¾åŒºï¼Œä»¥åŠæ¥è‡ªé˜¿é‡Œäº‘ã€å¾®è½¯äº‘çš„ OAM é¡¹ç›®ç»´æŠ¤è€…ä»¬åœ¨æ¼”è®²ä¸­å…±åŒå®£å¸ƒäº† KubeVela å¼€æºé¡¹ç›®çš„æ­£å¼å‘å¸ƒã€‚</p><p>ä» 11 æœˆ 18 å·åˆ° 20 å·ï¼Œåœ¨ä¸ºæœŸä¸‰å¤©çš„ KubeCon åŒ—ç¾å³°ä¼šä¸Šæœ‰è¿ç»­ 3 åœºæŠ€æœ¯æ¼”è®²ï¼Œä¼šä»ä¸åŒç»´åº¦ä»‹ç»å…³äº KubeVela é¡¹ç›®çš„å…·ä½“ç»†èŠ‚ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬ä¸€ä¸ªé•¿è¾¾ 1 ä¸ªåŠå°æ—¶çš„ KubeVela äº’åŠ¨æ•™å­¦ç¯èŠ‚ã€‚å¤šä¸ªé‡é‡çº§ç»„ç»‡ä»¥å¦‚æ­¤è§„æ¨¡å’Œå¯†åº¦åœ¨ KubeCon åŒ—ç¾å³°ä¼šæ¼”è®²ä¸­ä»‹ç»ä¸€ä¸ªé¦–æ¬¡å‘å¸ƒçš„ç¤¾åŒºå¼€æºé¡¹ç›®ï¼Œåœ¨ KubeCon è¯ç”Ÿä»¥æ¥å¹¶ä¸å¤šè§ã€‚</p><p>KubeVela Github åœ°å€ï¼š<a href="https://github.com/oam-dev/kubevela/" target="_blank" rel="noopener noreferrer">https://github.com/oam-dev/kubevela/</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä»€ä¹ˆæ˜¯-kubevela-ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ KubeVela ï¼Ÿ<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-kubevela-ï¼Ÿ" title="Direct link to heading">#</a></h2><p>ä¸€è¨€ä»¥è”½ä¹‹ï¼Œ<strong>KubeVela æ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨ä¸”é«˜åº¦å¯æ‰©å±•çš„åº”ç”¨ç®¡ç†å¹³å°ä¸æ ¸å¿ƒå¼•æ“</strong>ã€‚KubeVela æ˜¯åŸºäº Kubernetes ä¸ OAM æŠ€æœ¯æ„å»ºçš„ã€‚</p><p>è¯¦ç»†çš„è¯´ï¼Œå¯¹äºåº”ç”¨å¼€å‘äººå‘˜æ¥è®²ï¼ŒKubeVela æ˜¯ä¸€ä¸ªéå¸¸ä½å¿ƒæ™ºè´Ÿæ‹…çš„äº‘åŸç”Ÿåº”ç”¨ç®¡ç†å¹³å°ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯è®©å¼€å‘äººå‘˜æ–¹ä¾¿å¿«æ·åœ°åœ¨ Kubernetes ä¸Šå®šä¹‰ä¸äº¤ä»˜ç°ä»£å¾®æœåŠ¡åº”ç”¨ï¼Œæ— éœ€äº†è§£ä»»ä½• Kubernetes æœ¬èº«ç›¸å…³çš„ç»†èŠ‚ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒKubeVela å¯ä»¥è¢«è®¤ä¸ºæ˜¯<strong>äº‘åŸç”Ÿç¤¾åŒºçš„ Heroku</strong>ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¯¹äºå¹³å°å›¢é˜Ÿæ¥è®²ï¼ŒKubeVela æ˜¯ä¸€ä¸ªå¼ºå¤§å¹¶ä¸”é«˜å¯æ‰©å±•çš„äº‘åŸç”Ÿåº”ç”¨å¹³å°æ ¸å¿ƒå¼•æ“ã€‚åŸºäºè¿™æ ·ä¸€ä¸ªå¼•æ“ï¼Œå¹³å°å›¢é˜Ÿå¯ä»¥å¿«é€Ÿã€é«˜æ•ˆåœ°ä»¥ Kubernetes åŸç”Ÿçš„æ–¹å¼åœ¨ KubeVela ä¸­æ¤å…¥ä»»ä½•æ¥è‡ªäº‘åŸç”Ÿç¤¾åŒºçš„åº”ç”¨ç®¡ç†èƒ½åŠ›ï¼Œä»è€ŒåŸºäº KubeVela æ‰“é€ å‡ºè‡ªå·±éœ€è¦çš„äº‘åŸç”Ÿå¹³å°ï¼Œæ¯”å¦‚ï¼šäº‘åŸç”Ÿæ•°æ®åº“ PaaSã€äº‘åŸç”Ÿ AI å¹³å°ã€ç”šè‡³ Serverless æœåŠ¡ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒKubeVela å¯ä»¥è¢«è®¤ä¸ºæ˜¯<strong>ä¸€ä¸ªâ€œä»¥åº”ç”¨ä¸ºä¸­å¿ƒâ€çš„ Kubernetes å‘è¡Œç‰ˆ</strong>ï¼Œä»¥ OAM ä¸ºæ ¸å¿ƒï¼Œè®©å¹³å°å›¢é˜Ÿå¯ä»¥åŸºäº KubeVela å¿«é€Ÿæ‰“é€ å‡ºå±äºè‡ªå·±çš„ PaaSã€Serverless ä¹ƒè‡³ä»»ä½•é¢å‘ç”¨æˆ·çš„äº‘åŸç”Ÿå¹³å°é¡¹ç›®ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevela-è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>KubeVela è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ<a class="hash-link" href="#kubevela-è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ" title="Direct link to heading">#</a></h2><p>ç°å¦‚ä»Šï¼Œäº‘åŸç”ŸæŠ€æœ¯çš„è¿…çŒ›å‘å±•å¯èƒ½è®©å¾ˆå¤šäººéƒ½æ„Ÿè§‰åˆ°çœ¼èŠ±ç¼­ä¹±ï¼Œä½†å®é™…ä¸Šï¼Œè¿™ä¸ªç”Ÿæ€çš„æ€»ä½“å‘å±•è¶‹åŠ¿å’Œä¸»æ—‹å¾‹ï¼Œæ˜¯é€šè¿‡ Kubernetes æ­å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„åŸºç¡€è®¾æ–½æŠ½è±¡å±‚ï¼Œä¸ºå¹³å°å›¢é˜Ÿå±è”½æ‰äº†â€œè®¡ç®—â€ã€â€œç½‘ç»œâ€ã€â€œå­˜å‚¨â€ç­‰è¿‡å»æˆ‘ä»¬ä¸å¾—ä¸å…³æ³¨çš„åŸºç¡€è®¾æ–½æ¦‚å¿µï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŸºäº Kubernetes æ–¹ä¾¿åœ°æ„å»ºå‡ºä»»ä½•æˆ‘ä»¬æƒ³è¦çš„å‚ç›´ä¸šåŠ¡ç³»ç»Ÿè€Œæ— éœ€å…³å¿ƒä»»ä½•åŸºç¡€è®¾æ–½å±‚çš„ç»†èŠ‚ã€‚è¿™æ­£æ˜¯ Kubernetes è¢«ç§°ä¸ºäº‘è®¡ç®—ç•Œçš„ Linux ä»¥åŠ â€œPlatform for Platformsâ€ çš„æ ¹æœ¬åŸå› ã€‚</p><p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬æŠŠè§†è§’ä»å¹³å°å›¢é˜Ÿæå‡åˆ°å‚ç›´ä¸šåŠ¡ç³»ç»Ÿçš„æœ€ç»ˆç”¨æˆ·ï¼ˆå¦‚ï¼šåº”ç”¨å¼€å‘äººå‘˜ï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç° Kubernetes è¿™æ ·çš„å®šä½å’Œè®¾è®¡åœ¨è§£å†³äº†å¹³å°å›¢é˜Ÿçš„å¤§é—®é¢˜ä¹‹åï¼Œå´ä¹Ÿä¸ºåº”ç”¨å¼€å‘è€…ä»¬å¸¦æ¥äº†æŒ‘æˆ˜å’Œå›°æ‰°ã€‚æ¯”å¦‚ï¼Œå¤ªå¤šçš„ç”¨æˆ·éƒ½åœ¨æŠ±æ€¨ Kubernetes â€œå¤ªå¤æ‚äº†â€ã€‚ç©¶å…¶åŸå› ï¼Œå…¶å®åœ¨äº Kubernetes ä¸­çš„æ ¸å¿ƒæ¦‚å¿µä¸ä½“ç³»ï¼Œå¦‚ï¼šPodã€sidecarã€Serviceã€èµ„æºç®¡ç†ã€è°ƒåº¦ç®—æ³•å’Œ CRD ç­‰ç­‰ï¼Œä¸»è¦æ˜¯é¢å‘å¹³å°å›¢é˜Ÿè€Œéæœ€ç»ˆç”¨æˆ·è®¾è®¡çš„ã€‚ç¼ºä¹é¢å‘ç”¨æˆ·çš„è®¾è®¡ä¸ä»…å¸¦æ¥äº†é™¡å³­çš„å­¦ä¹ æ›²çº¿ï¼Œå½±å“äº†ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œæ‹–æ…¢äº†ç ”å‘æ•ˆèƒ½ï¼Œç”šè‡³åœ¨å¾ˆå¤šæƒ…å†µä¸‹è¿˜ä¼šå¼•å‘é”™è¯¯æ“ä½œä¹ƒè‡³ç”Ÿäº§æ•…éšœï¼ˆæ¯•ç«Ÿä¸å¯èƒ½æ¯ä¸ªä¸šåŠ¡å¼€å‘äººå‘˜éƒ½æ˜¯ Kubernetes ä¸“å®¶ï¼‰ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨äº‘åŸç”Ÿç”Ÿæ€ä¸­ï¼Œå‡ ä¹æ¯ä¸€ä¸ªå¹³å°å›¢é˜Ÿéƒ½ä¼šåŸºäº Kubernetes æ„å»ºä¸€ä¸ªä¸Šå±‚å¹³å°ç»™ç”¨æˆ·ä½¿ç”¨ã€‚æœ€ç®€å•çš„ä¹Ÿä¼šç»™ Kubernetes åšä¸€ä¸ªå›¾å½¢ç•Œé¢ï¼Œç¨å¾®æ­£å¼ä¸€äº›çš„åˆ™å¾€å¾€ä¼šåŸºäº Kubernetes å¼€å‘ä¸€ä¸ªç±» PaaS å¹³å°æ¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ã€‚ç†è®ºä¸Šè®²ï¼Œåœ¨ Kubernetes ç”Ÿæ€ä¸­å„ç§èƒ½åŠ›å·²ç»éå¸¸ä¸°å¯Œçš„ä»Šå¤©ï¼Œå¼€å‘ä¸€ä¸ªç±» PaaS å¹³å°åº”è¯¥æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚</p><p>ç„¶è€Œç°å®å´å¾€å¾€ä¸å°½å¦‚äººæ„ã€‚åœ¨å¤§é‡çš„ç¤¾åŒºè®¿è°ˆå½“ä¸­ï¼Œæˆ‘ä»¬å‘ç°åœ¨äº‘åŸç”ŸæŠ€æœ¯æå¤§æ™®åŠçš„ä»Šå¤©ï¼ŒåŸºäº Kubernetes æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€ç”¨æˆ·å‹å¥½çš„ä¸Šå±‚åº”ç”¨å¹³å°ï¼Œä¾ç„¶æ˜¯ä¸­å¤§å‹å…¬å¸ä»¬çš„â€œä¸“åˆ©â€ã€‚è¿™é‡Œçš„åŸå› åœ¨äºï¼š</p><blockquote><p>Kubernetes ç”Ÿæ€æœ¬èº«çš„èƒ½åŠ›æ± å›ºç„¶ä¸°å¯Œï¼Œä½†æ˜¯ç¤¾åŒºé‡Œå´å¹¶æ²¡æœ‰ä¸€ä¸ªå¯æ‰©å±•çš„ã€æ–¹ä¾¿å¿«æ·çš„æ–¹å¼ï¼Œèƒ½å¤Ÿå¸®åŠ©å¹³å°å›¢é˜ŸæŠŠè¿™äº›èƒ½åŠ›å¿«é€Ÿâ€œç»„è£…â€æˆé¢å‘æœ€ç»ˆç”¨æˆ·çš„åŠŸèƒ½ï¼ˆFeatureï¼‰ã€‚</p></blockquote><p>è¿™ç§å›°å¢ƒå¸¦æ¥çš„ç»“æœï¼Œå°±æ˜¯å°½ç®¡å¤§å®¶ä»Šå¤©éƒ½åœ¨åŸºäº Kubernetes åœ¨æ„å»ºä¸Šå±‚åº”ç”¨å¹³å°ï¼Œä½†è¿™äº›å¹³å°æœ¬è´¨ä¸Šå´å¹¶ä¸èƒ½å¤Ÿä¸ Kubernetes ç”Ÿæ€å®Œå…¨æ‰“é€šï¼Œè€Œéƒ½å˜æˆä¸€ä¸ªåˆä¸€ä¸ªçš„å‚ç›´â€œçƒŸå›±â€ã€‚</p><p>åœ¨å¼€æºç¤¾åŒºä¸­ï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´åŠ æ˜æ˜¾ã€‚åœ¨ä»Šå¤©çš„ Kubernetes ç¤¾åŒºä¸­ï¼Œä¸ä¹å„ç§â€œé¢å‘ç”¨æˆ·â€ã€â€œé¢å‘åº”ç”¨â€çš„ Kubernetes ä¸Šå±‚ç³»ç»Ÿã€‚ä½†æ­£å¦‚å‰æ–‡æ‰€è¿°ï¼Œè¿™äº›å¹³å°éƒ½æ— ä¸€ä¾‹å¤–çš„å¼•å…¥äº†è‡ªå·±çš„ä¸“å±ä¸Šå±‚æŠ½è±¡ã€ç”¨æˆ·ç•Œé¢å’Œæ’ä»¶æœºåˆ¶ã€‚è¿™é‡Œæœ€å…¸å‹çš„ä¾‹å­åŒ…æ‹¬ç»å…¸ PaaS é¡¹ç›®æ¯”å¦‚ Cloud Foundryï¼Œä¹ŸåŒ…æ‹¬å„ç§ Serverless å¹³å°ã€‚ä½œä¸ºä¸€ä¸ªå…¬å¸çš„å¹³å°å›¢é˜Ÿï¼Œæˆ‘ä»¬å®é™…ä¸Šåªæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šè¦ä¹ˆæŠŠè‡ªå·±å±€é™åœ¨æŸç§å‚ç›´çš„åœºæ™¯ä¸­æ¥é€‚é…å’Œé‡‡çº³æŸä¸ªå¼€æºä¸Šå±‚å¹³å°é¡¹ç›®ï¼›è¦ä¹ˆå°±åªèƒ½è‡ªç ”ä¸€ä¸ªç¬¦åˆè‡ªå·±è¯‰æ±‚çš„ä¸Šå±‚å¹³å°å¹¶ä¸”é€ æ— æ•°ä¸ªç¤¾åŒºä¸­å·²ç»å­˜åœ¨çš„â€œè½®å­â€ã€‚</p><p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰â€ç¬¬ä¸‰ç§é€‰æ‹©â€èƒ½å¤Ÿè®©å¹³å°å›¢é˜Ÿåœ¨ä¸é€ è½®å­ã€å®Œå…¨æ‰“é€š Kubernetes ç”Ÿæ€çš„å‰æä¸‹ï¼Œè½»æ¾çš„æ„å»ºé¢å‘ç”¨æˆ·çš„ä¸Šå±‚å¹³å°å‘¢ï¼Ÿ</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevela-å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜ï¼Ÿ"></a>KubeVela å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜ï¼Ÿ<a class="hash-link" href="#kubevela-å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜ï¼Ÿ" title="Direct link to heading">#</a></h2><p>KubeVela é¡¹ç›®çš„åˆ›ç«‹åˆè¡·ï¼Œå°±æ˜¯ä»¥ä¸€ä¸ªç»Ÿä¸€çš„æ–¹å¼åŒæ—¶è§£å†³ä¸Šè¿°æœ€ç»ˆç”¨æˆ·ä¸å¹³å°å›¢é˜Ÿæ‰€é¢ä¸´çš„å›°å¢ƒã€‚è¿™ä¹Ÿæ˜¯ä¸ºä½•åœ¨è®¾è®¡ä¸­ï¼ŒKubeVela å¯¹æœ€ç»ˆç”¨æˆ·å’Œå¹³å°å›¢é˜Ÿè¿™ä¸¤ç§ç¾¤ä½“è¿›è¡Œäº†å•ç‹¬çš„ç”»åƒï¼Œä»¥æ»¡è¶³ä»–ä»¬ä¸åŒçš„è¯‰æ±‚ã€‚</p><p>ç”±äº KubeVela é»˜è®¤çš„åŠŸèƒ½é›†ä¸â€œHerokuâ€ç±»ä¼¼ï¼ˆå³ï¼šä¸»è¦é¢å‘åº”ç”¨å¼€å‘äººå‘˜ï¼‰ï¼Œæ‰€ä»¥åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šä»¥åº”ç”¨å¼€å‘äººå‘˜æˆ–è€…å¼€å‘è€…æ¥ä»£æ›¿æœ€ç»ˆç”¨æˆ·ã€‚ä½†æˆ‘ä»¬å¾ˆå¿«ä¹Ÿä¼šè®²åˆ°ï¼ŒKubeVela é‡Œçš„æ¯ä¸€ä¸ªåŠŸèƒ½ï¼Œéƒ½æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œä½œä¸ºå¹³å°å›¢é˜Ÿï¼Œä½ å¯ä»¥è½»æ¾åœ°â€œå¸è½½â€å®ƒçš„æ‰€æœ‰å†…ç½®èƒ½åŠ›ã€ç„¶åâ€œå®‰è£…â€è‡ªå·±éœ€è¦çš„ä»»ä½•ç¤¾åŒºèƒ½åŠ›ï¼Œè®© KubeVela å˜æˆä¸€ä¸ªå®Œå…¨ä¸ä¸€æ ·çš„ç³»ç»Ÿã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-åº”ç”¨å¼€å‘è€…çœ¼ä¸­çš„-kubevela"></a>1. åº”ç”¨å¼€å‘è€…çœ¼ä¸­çš„ KubeVela<a class="hash-link" href="#1-åº”ç”¨å¼€å‘è€…çœ¼ä¸­çš„-kubevela" title="Direct link to heading">#</a></h3><p>å‰é¢å·²ç»æåˆ°ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒKubeVela æ˜¯ä¸€ä¸ªç®€å•ã€æ˜“ç”¨ã€åˆé«˜å¯æ‰©å±•çš„äº‘åŸç”Ÿåº”ç”¨ç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥è®©å¼€å‘è€…ä»¥æä½çš„å¿ƒæ™ºè´Ÿæ‹…å’Œä¸Šæ‰‹æˆæœ¬åœ¨ Kubernetes ä¸Šå®šä¹‰ä¸éƒ¨ç½²åº”ç”¨ã€‚è€Œå…³äºæ•´ä¸ªç³»ç»Ÿçš„ä½¿ç”¨ï¼Œå¼€å‘è€…åªéœ€è¦ç¼–å†™ä¸€ä¸ª docker-compose é£æ ¼åº”ç”¨æè¿°æ–‡ä»¶ Appfile å³å¯ï¼Œä¸éœ€è¦æ¥è§¦å’Œå­¦ä¹ ä»»ä½• Kubernetes å±‚çš„ç›¸å…³ç»†èŠ‚ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1ï¼‰ä¸€ä¸ª-appfile-ç¤ºä¾‹"></a>1ï¼‰ä¸€ä¸ª Appfile ç¤ºä¾‹<a class="hash-link" href="#1ï¼‰ä¸€ä¸ª-appfile-ç¤ºä¾‹" title="Direct link to heading">#</a></h4><p>åœ¨ä¸‹è¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼šå°†ä¸€ä¸ªå«åš vela.yaml çš„ Appfile æ”¾åœ¨ä½ çš„åº”ç”¨ä»£ç ç›®å½•ä¸­ï¼ˆæ¯”å¦‚åº”ç”¨çš„ GitHub Repoï¼‰ã€‚è¿™ä¸ª Appfile å®šä¹‰äº†å¦‚ä½•å°†è¿™ä¸ªåº”ç”¨ç¼–è¯‘æˆ Docker é•œåƒï¼Œå¦‚ä½•å°†é•œåƒéƒ¨ç½²åˆ° Kubernetesï¼Œå¦‚ä½•é…ç½®å¤–ç•Œè®¿é—®åº”ç”¨çš„è·¯ç”±å’ŒåŸŸåï¼Œåˆå¦‚ä½•è®© Kubernetes è‡ªåŠ¨æ ¹æ® CPU ä½¿ç”¨é‡æ¥æ°´å¹³æ‰©å±•è¿™ä¸ªåº”ç”¨ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> testapp</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">express-server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> oamdev/testapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Dockerfile</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">contrxt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">cmd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;node&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;server.js&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0.01&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">route</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> example.com</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /testapp</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">rewriteTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">autoscale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">min</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cpuPercent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åªè¦æœ‰äº†è¿™ä¸ª 20 è¡Œçš„é…ç½®æ–‡ä»¶ï¼Œä½ æ¥ä¸‹æ¥å”¯ä¸€éœ€è¦çš„äº‹æƒ…å°±æ˜¯ $ vela upï¼Œè¿™ä¸ªåº”ç”¨å°±ä¼šè¢«éƒ¨ç½²åˆ° Kubernetes ä¸­ç„¶åè¢«å¤–ç•Œä»¥ <a href="https://example.com/testapp" target="_blank" rel="noopener noreferrer">https://example.com/testapp</a> çš„æ–¹å¼è®¿é—®åˆ°ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2ï¼‰appfile-æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>2ï¼‰Appfile æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ<a class="hash-link" href="#2ï¼‰appfile-æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" title="Direct link to heading">#</a></h4><p>åœ¨ KubeVela çš„ Appfile èƒŒåï¼Œæœ‰ç€éå¸¸ç²¾å¦™çš„è®¾è®¡ã€‚é¦–å…ˆéœ€è¦æŒ‡å‡ºçš„å°±æ˜¯ï¼Œ<strong>è¿™ä¸ª Appfile æ˜¯æ²¡æœ‰å›ºå®šçš„ Schema çš„</strong>ã€‚</p><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿè¿™ä¸ª Appfile é‡Œé¢ä½ èƒ½å¤Ÿå¡«å†™çš„æ¯ä¸€ä¸ªå­—æ®µï¼Œéƒ½æ˜¯ç›´æ¥å–å†³äºå½“å‰å¹³å°ä¸­æœ‰å“ªäº›å·¥ä½œè´Ÿè½½ç±»å‹ï¼ˆWorkload Typesï¼‰å’Œåº”ç”¨ç‰¹å¾ï¼ˆTraitsï¼‰æ˜¯å¯ç”¨çš„ã€‚è€Œç†Ÿæ‚‰ OAM çš„åŒå­¦éƒ½çŸ¥é“ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œæ­£æ˜¯ OAM è§„èŒƒçš„æ ¸å¿ƒå†…å®¹ï¼Œå…¶ä¸­ï¼š</p><ul><li><p><a href="https://kubevela.io/#/en/concepts?id=workload-type-amp-trait" target="_blank" rel="noopener noreferrer">å·¥ä½œè´Ÿè½½ç±»å‹ï¼ˆWorkload Typeï¼‰</a>ï¼Œå®šä¹‰çš„æ˜¯åº•å±‚åŸºç¡€è®¾æ–½å¦‚ä½•è¿è¡Œè¿™ä¸ªåº”ç”¨ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å£°æ˜ï¼šåå« testapp çš„åº”ç”¨ä¼šå¯åŠ¨ä¸€ä¸ªç±»å‹ä¸ºâ€œåœ¨çº¿ Web æœåŠ¡ï¼ˆWeb Serviceï¼‰â€ çš„å·¥ä½œè´Ÿè½½ï¼Œå…¶å®ä¾‹çš„åå­—æ˜¯ express-serverã€‚</p></li><li><p><a href="https://kubevela.io/#/en/concepts?id=workload-type-amp-trait" target="_blank" rel="noopener noreferrer">åº”ç”¨ç‰¹å¾ï¼ˆTraitsï¼‰</a>ï¼Œåˆ™ä¸ºå·¥ä½œè´Ÿè½½å®ä¾‹åŠ ä¸Šäº†è¿ç»´æ—¶é…ç½®ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Route Trait æ¥æè¿°åº”ç”¨å¦‚ä½•è¢«ä»å¤–ç•Œè®¿é—®ï¼Œä»¥åŠä¸€ä¸ª Autoscale Trait æ¥æè¿°åº”ç”¨å¦‚ä½•æ ¹æ® CPU ä½¿ç”¨é‡è¿›è¡Œè‡ªåŠ¨çš„æ°´å¹³æ‰©å®¹ã€‚</p></li></ul><p>è€Œæ­£æ˜¯åŸºäºè¿™ç§æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œè¿™ä¸ª Appfile æœ¬èº«æ˜¯é«˜åº¦å¯æ‰©å±•çš„ã€‚å½“ä»»ä½•ä¸€ä¸ªæ–°çš„ Workload Type æˆ–è€… Trait è¢«å®‰è£…åˆ°å¹³å°åï¼Œç”¨æˆ·å°±å¯ä»¥ç«‹åˆ»åœ¨ Appfile é‡Œå£°æ˜ä½¿ç”¨è¿™ä¸ªæ–°å¢çš„èƒ½åŠ›ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚åé¢å¹³å°å›¢é˜Ÿæ–°å¼€å‘äº†ä¸€ä¸ªç”¨æ¥é…ç½®åº”ç”¨ç›‘æ§å±æ€§çš„è¿ç»´ä¾§èƒ½åŠ›ï¼Œå«åš Metricsã€‚é‚£ä¹ˆåªéœ€è¦ä¸¾æ‰‹ä¹‹æï¼Œåº”ç”¨å¼€å‘è€…å°±å¯ä»¥ç«‹åˆ»ä½¿ç”¨ $ vela show metrics å‘½ä»¤æŸ¥çœ‹è¿™ä¸ªæ–°å¢èƒ½åŠ›çš„è¯¦æƒ…ï¼Œå¹¶ä¸”åœ¨ Appfile ä¸­ä½¿ç”¨å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> testapp</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">express-server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> oamdev/testapp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">docker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Dockerfile</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">contrxt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">cmd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;node&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;server.js&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0.01&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">route</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">domain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> example.com</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /testapp</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">rewriteTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">autoscale</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">min</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">cpuPercent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">metrices</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8080</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/metrics&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ç§ç®€å•å‹å¥½ã€åˆé«˜åº¦æ•æ·çš„ä½¿ç”¨ä½“éªŒï¼Œæ­£æ˜¯ KubeVela åœ¨æœ€ç»ˆç”¨æˆ·ä¾§æä¾›çš„ä¸»è¦ä½“æ„Ÿã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3ï¼‰vela-up-å‘½ä»¤"></a>3ï¼‰Vela Up å‘½ä»¤<a class="hash-link" href="#3ï¼‰vela-up-å‘½ä»¤" title="Direct link to heading">#</a></h4><p>å‰é¢æåˆ°ï¼Œä¸€æ—¦ Appfile å‡†å¤‡å¥½ï¼Œå¼€å‘è€…åªéœ€è¦ä¸€å¥ vela up å‘½ä»¤å°±å¯ä»¥æŠŠæ•´ä¸ªåº”ç”¨è¿åŒå®ƒçš„è¿ç»´ç‰¹å¾éƒ¨ç½²åˆ° Kubernetes ä¸­ã€‚éƒ¨ç½²æˆåŠŸåï¼Œä½ å¯ä»¥ä½¿ç”¨ vela status æ¥æŸ¥çœ‹æ•´ä¸ªåº”ç”¨çš„è¯¦æƒ…ï¼ŒåŒ…æ‹¬å¦‚ä½•è®¿é—®è¿™ä¸ªåº”ç”¨ã€‚</p><p><img src="https://tvax2.sinaimg.cn/large/ad5fbf65gy1glf9pyhr42j20la0kiafn.jpg"></p><p>é€šè¿‡ KubeVela éƒ¨ç½²çš„åº”ç”¨ä¼šè¢«è‡ªåŠ¨è®¾ç½®å¥½è®¿é—® URLï¼ˆä»¥åŠä¸åŒç‰ˆæœ¬å¯¹åº”çš„ä¸åŒ URLï¼‰ï¼Œå¹¶ä¸”ä¼šç”± cert-manager ç”Ÿæˆå¥½è¯ä¹¦ã€‚ä¸æ­¤åŒæ—¶ï¼ŒKubeVela è¿˜æä¾›äº†ä¸€ç³»åˆ—è¾…åŠ©å‘½ä»¤ï¼ˆæ¯”å¦‚ï¼švela logs å’Œ vela execï¼‰æ¥å¸®åŠ©ä½ åœ¨æ— éœ€æˆä¸º Kubernetes ä¸“å®¶çš„æƒ…å†µä¸‹æ›´å¥½åœ°ç®¡ç†å’Œè°ƒè¯•ä½ çš„åº”ç”¨ã€‚å¦‚æœä½ å¯¹ä¸Šè¿°ç”± KubeVela å¸¦æ¥çš„å¼€å‘è€…ä½“éªŒæ„Ÿå…´è¶£çš„è¯ï¼Œæ¬¢è¿å‰å¾€ KubeVela é¡¹ç›®çš„ç”¨æˆ·ä½¿ç”¨æ–‡æ¡£æ¥äº†è§£æ›´å¤šã€‚</p><p>è€Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åˆ‡æ¢ä¸€ä¸‹è§†è§’ï¼Œæ„Ÿå—ä¸€ä¸‹å¹³å°å›¢é˜Ÿçœ¼ä¸­çš„ KubeVela åˆæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-å¹³å°å·¥ç¨‹å¸ˆçœ¼ä¸­çš„-kubevela"></a>2. å¹³å°å·¥ç¨‹å¸ˆçœ¼ä¸­çš„ KubeVela<a class="hash-link" href="#2-å¹³å°å·¥ç¨‹å¸ˆçœ¼ä¸­çš„-kubevela" title="Direct link to heading">#</a></h3><p>å®é™…ä¸Šï¼Œå‰é¢ä»‹ç»åˆ°çš„æ‰€æœ‰å¼€å‘è€…ä¾§ä½“éªŒï¼Œéƒ½ç¦»ä¸å¼€ KubeVela åœ¨å¹³å°ä¾§è¿›è¡Œçš„å„ç§åˆ›æ–°æ€§è®¾è®¡ä¸å®ç°ã€‚ä¹Ÿæ­£æ˜¯è¿™äº›è®¾è®¡çš„å­˜åœ¨ï¼Œæ‰ä½¿å¾— KubeVela ä¸æ˜¯ä¸€ä¸ªç®€å•çš„ PaaS æˆ–è€… Serverlessï¼Œ<strong>è€Œæ˜¯ä¸€ä¸ªå¯ä»¥ç”±å¹³å°å·¥ç¨‹å¸ˆæ‰©å±•æˆä»»æ„å‚ç›´ç³»ç»Ÿçš„äº‘åŸç”Ÿå¹³å°å†…æ ¸</strong>ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒKubeVela ä¸ºå¹³å°å·¥ç¨‹å¸ˆæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼Œä½¿å¾—åŸºäº Kubernetes æ„å»ºä¸Šè¿°é¢å‘ç”¨æˆ·çš„äº‘åŸç”Ÿå¹³å°ä»â€œé˜³æ˜¥ç™½é›ªâ€å˜æˆäº†â€œå°èœä¸€ç¢Ÿâ€ï¼š</p><p><strong>ç¬¬ä¸€ï¼šä»¥åº”ç”¨ä¸ºä¸­å¿ƒ</strong>ã€‚åœ¨ Appfile èƒŒåï¼Œå…¶å®å°±æ˜¯â€œåº”ç”¨â€è¿™ä¸ªæ¦‚å¿µï¼Œå®ƒæ˜¯åŸºäº OAM æ¨¡å‹å®ç°çš„ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒKubeVela è®©â€œåº”ç”¨â€è¿™ä¸ªæ¦‚å¿µæˆä¸ºäº†æ•´ä¸ªå¹³å°å¯¹ç”¨æˆ·æš´éœ²çš„æ ¸å¿ƒ APIã€‚KubeVela ä¸­çš„æ‰€æœ‰èƒ½åŠ›ï¼Œéƒ½æ˜¯å›´ç»•ç€â€œåº”ç”¨â€å±•å¼€çš„ã€‚è¿™æ­£æ˜¯ä¸ºä½•åŸºäº KubeVela æ‰©å±•å’Œæ„å»ºå‡ºæ¥çš„å¹³å°ï¼Œå¤©ç„¶æ˜¯ç”¨æˆ·å‹å¥½çš„ï¼šå¯¹äºä¸€ä¸ªå¼€å‘è€…æ¥è¯´ï¼Œä»–åªå…³å¿ƒâ€œåº”ç”¨â€ï¼Œè€Œä¸æ˜¯å®¹å™¨æˆ–è€… Kubernetesï¼›è€Œ KubeVela ä¼šç¡®ä¿æ„å»ºæ•´ä¸ªå¹³å°çš„è¿‡ç¨‹ï¼Œä¹Ÿåªä¸åº”ç”¨å±‚çš„éœ€æ±‚æœ‰å…³ã€‚</p><p><strong>ç¬¬äºŒï¼šKubernetes åŸç”Ÿçš„é«˜å¯æ‰©å±•æ€§</strong>ã€‚åœ¨å‰é¢æˆ‘ä»¬å·²ç»æåˆ°è¿‡ï¼ŒAppfile æ˜¯ä¸€ä¸ªç”± Workload Type å’Œ Trait ç»„æˆçš„ã€å®Œå…¨æ¨¡å—åŒ–çš„å¯¹è±¡ã€‚è€Œ OAM æ¨¡å‹çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯ä»»æ„ä¸€ä¸ª Kubernetes API èµ„æºï¼Œéƒ½å¯ä»¥ç›´æ¥åŸºäº Kubernetes çš„ CRD å‘ç°æœºåˆ¶æ³¨å†Œä¸ºä¸€ä¸ª Workload Type æˆ–è€… Traitã€‚è¿™ç§å¯æ‰©å±•æ€§ï¼Œä½¿å¾— KubeVela å¹¶ä¸éœ€è¦è®¾è®¡ä»»ä½•â€œæ’ä»¶ç³»ç»Ÿâ€ï¼š<strong>KubeVela é‡Œçš„æ¯ä¸€ä¸ªèƒ½åŠ›ï¼Œéƒ½æ˜¯æ’ä»¶ï¼Œè€Œæ•´ä¸ª Kubernetes ç¤¾åŒºï¼Œå°±æ˜¯ KubeVela åŸç”Ÿçš„æ’ä»¶ä¸­å¿ƒ</strong>ã€‚</p><p><strong>ç¬¬ä¸‰ï¼šç®€å•å‹å¥½ä½†é«˜åº¦å¯æ‰©å±•çš„ç”¨æˆ·ä¾§æŠ½è±¡ä½“ç³»</strong>ã€‚åœ¨äº†è§£äº† Appfile ä¹‹åï¼Œä½ å¯èƒ½å·²ç»å¯¹è¿™ä¸ªå¯¹è±¡çš„å®ç°æ–¹å¼äº§ç”Ÿäº†å¥½å¥‡ã€‚å®é™…ä¸Šï¼ŒKubeVela ä¸­å¹¶ä¸æ˜¯ç®€å•çš„å®ç°äº†ä¸€ä¸ª Appfileã€‚åœ¨å¹³å°å±‚ï¼ŒKubeVela åœ¨ OAM æ¨¡å‹å±‚å®ç°ä¸­é›†æˆäº†CUELang è¿™ç§ç®€æ´å¼ºå¤§çš„æ¨¡æ¿è¯­è¨€ï¼Œä»è€Œä¸ºå¹³å°å·¥ç¨‹å¸ˆåŸºäº Kubernetes API å¯¹è±¡å®šä¹‰ç”¨æˆ·ä¾§æŠ½è±¡ï¼ˆå³ï¼šâ€œæœ€åä¸€å…¬é‡Œâ€æŠ½è±¡ï¼‰æä¾›äº†ä¸€ä¸ªæ ‡å‡†ã€é€šç”¨çš„é…ç½®å·¥å…·ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¹³å°å·¥ç¨‹å¸ˆæˆ–è€…ç³»ç»Ÿç®¡ç†å‘˜ï¼Œå¯ä»¥éšæ—¶éšåœ°çš„æ¯ä¸ªèƒ½åŠ›å¯¹åº”çš„ CUE æ¨¡æ¿è¿›è¡Œä¿®æ”¹ï¼Œè¿™äº›ä¿®æ”¹ä¸€æ—¦æäº¤åˆ° Kubernetesï¼Œç”¨æˆ·åœ¨ Appfile é‡Œå°±å¯ä»¥ç«‹åˆ»ä½¿ç”¨åˆ°æ–°çš„æŠ½è±¡ï¼Œä¸éœ€è¦é‡æ–°éƒ¨ç½²æˆ–è€…å®‰è£… KubeVelaã€‚</p><p>åœ¨å…·ä½“å®ç°å±‚ï¼ŒKubeVela æ˜¯åŸºäº OAM Kubernetes Runtime æ„å»ºçš„ï¼ŒåŒæ—¶é‡‡ç”¨ KEDA ï¼ŒFlaggerï¼ŒPrometheus ç­‰ç”Ÿæ€é¡¹ç›®ä½œä¸º Trait çš„èƒŒåçš„ä¾èµ–ã€‚å½“ç„¶ï¼Œè¿™äº›ä¾èµ–åªæ˜¯ KubeVela çš„é€‰å‹ï¼Œä½ å¯ä»¥éšæ—¶ä¸º KubeVela å®šåˆ¶å’Œå®‰è£…ä½ å–œæ¬¢çš„ä»»ä½•èƒ½åŠ›ä½œä¸º Workload Type æˆ–è€… Traitã€‚ç»¼åˆä»¥ä¸Šè®²è§£ï¼ŒKubeVela é¡¹ç›®çš„æ•´ä½“æ¶æ„ç”±<strong>ç”¨æˆ·ç•Œé¢å±‚ï¼Œæ¨¡å‹å±‚ï¼Œå’Œèƒ½åŠ›ç®¡ç†å±‚</strong>ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://tva2.sinaimg.cn/large/ad5fbf65gy1glf9sktkdxj20q00dsacl.jpg"></p><p>æœ‰äº† KubeVelaï¼Œå¹³å°å·¥ç¨‹å¸ˆç»ˆäºæ‹¥æœ‰äº†ä¸€ä¸ªå¯ä»¥æ–¹ä¾¿å¿«æ·åœ°å°†ä»»ä½•ä¸€ä¸ª Kubernetes ç¤¾åŒºèƒ½åŠ›å°è£…æŠ½è±¡æˆä¸€ä¸ªé¢å‘ç”¨æˆ·çš„ä¸Šå±‚å¹³å°ç‰¹æ€§çš„å¼ºå¤§å·¥å…·ã€‚è€Œä½œä¸ºè¿™ä¸ªå¹³å°çš„æœ€ç»ˆç”¨æˆ·ï¼Œåº”ç”¨å¼€å‘è€…ä»¬åªéœ€è¦å­¦ä¹ è¿™äº›ä¸Šå±‚æŠ½è±¡ï¼Œåœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­æè¿°åº”ç”¨ï¼Œå°±å¯ä»¥ä¸€é”®äº¤ä»˜å‡ºå»ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-kubevela-vs-ç»å…¸-paas"></a>3. KubeVela VS ç»å…¸ PaaS<a class="hash-link" href="#3-kubevela-vs-ç»å…¸-paas" title="Direct link to heading">#</a></h3><p>å¾ˆå¤šäººå¯èƒ½ä¼šé—®ï¼ŒKubeVela è·Ÿç»å…¸ PaaS çš„ä¸»è¦åŒºåˆ«å’Œè”ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œå¤§å¤šæ•°ç»å…¸ PaaS éƒ½èƒ½æä¾›å®Œæ•´çš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿéå¸¸å…³æ³¨æä¾›ç®€å•å‹å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæå‡ç ”å‘æ•ˆèƒ½ã€‚åœ¨è¿™äº›ç‚¹ä¸Šï¼ŒKubeVela è·Ÿç»å…¸ PaaS çš„ç›®æ ‡ï¼Œæ˜¯éå¸¸ä¸€è‡´çš„ã€‚</p><p>ä½†å¦ä¸€æ–¹é¢ï¼Œç»å…¸ PaaS å¾€å¾€æ˜¯ä¸å¯æ‰©å±•çš„ï¼ˆæ¯”å¦‚ Rancher çš„ Rio é¡¹ç›®ï¼‰ï¼Œæˆ–è€…ä¼šå¼•å…¥å±äºè‡ªå·±çš„æ’ä»¶ç”Ÿæ€ï¼ˆå“ªæ€•è¿™ä¸ª PaaS æ˜¯å®Œå…¨åŸºäº Kubernetes æ„å»ºçš„ï¼‰ï¼Œä»¥æ­¤æ¥ç¡®ä¿å¹³å°æœ¬èº«çš„ç”¨æˆ·ä½“éªŒå’Œèƒ½åŠ›çš„å¯æ§åˆ¶æ€§ï¼ˆæ¯”å¦‚ Cloud Foundry æˆ–è€… Heroku çš„<a href="https://elements.heroku.com/addons" target="_blank" rel="noopener noreferrer">æ’ä»¶ä¸­å¿ƒ</a>ï¼‰ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒKubeVela çš„è®¾è®¡æ˜¯å®Œå…¨ä¸åŒçš„ã€‚KubeVela çš„ç›®æ ‡ï¼Œä»ä¸€å¼€å§‹å°±æ˜¯åˆ©ç”¨æ•´ä¸ª Kubernetes ç¤¾åŒºä½œä¸ºè‡ªå·±çš„â€œæ’ä»¶ä¸­å¿ƒâ€ï¼Œå¹¶ä¸”â€œæ•…æ„â€æŠŠå®ƒçš„æ¯ä¸€ä¸ªå†…ç½®èƒ½åŠ›éƒ½è®¾è®¡æˆæ˜¯ç‹¬ç«‹çš„ã€å¯æ’æ‹”çš„æ’ä»¶ã€‚è¿™ç§é«˜åº¦å¯æ‰©å±•çš„æ¨¡å‹ï¼ŒèƒŒåå…¶å®æœ‰ç€ç²¾å¯†çš„è®¾è®¡ä¸å®ç°ã€‚æ¯”å¦‚ï¼ŒKubeVela å¦‚ä½•ç¡®ä¿æŸä¸ªå®Œå…¨ç‹¬ç«‹çš„ Trait ä¸€å®šèƒ½å¤Ÿç»‘å®šäºæŸç§ Workload Typeï¼Ÿå¦‚ä½•æ£€æŸ¥è¿™äº›ç›¸äº’ç‹¬ç«‹çš„ Trait æ˜¯å¦å†²çªï¼Ÿè¿™äº›æŒ‘æˆ˜ï¼Œæ­£æ˜¯ Open Application Modelï¼ˆOAMï¼‰ä½œä¸º KubeVela æ¨¡å‹å±‚çš„èµ·åˆ°çš„å…³é”®ä½œç”¨ï¼Œä¸€è¨€ä»¥è”½ä¹‹ï¼šOAM æ˜¯ä¸€ä¸ªé«˜åº¦å¯æ‰©å±•çš„åº”ç”¨å®šä¹‰ä¸èƒ½åŠ›ç®¡ç†æ¨¡å‹ã€‚</p><p>KubeVela å’Œ OAM ç¤¾åŒºæ¬¢è¿å¤§å®¶è®¾è®¡å’Œåˆ¶ä½œä»»ä½• Workload Type å’Œ Trait çš„å®šä¹‰æ–‡ä»¶ã€‚åªè¦æŠŠå®ƒä»¬å­˜æ”¾åœ¨ GitHub ä¸Šï¼Œå…¨ä¸–ç•Œä»»ä½•ä¸€ä¸ª KubeVela ç”¨æˆ·å°±éƒ½å¯ä»¥åœ¨è‡ªå·±çš„ Appfile é‡Œä½¿ç”¨ä½ æ‰€è®¾è®¡çš„èƒ½åŠ›ã€‚å…·ä½“çš„æ–¹å¼ï¼Œè¯·å‚è€ƒ <code>$ vela cap</code> ï¼ˆå³ï¼šæ’ä»¶èƒ½åŠ›ç®¡ç†å‘½ä»¤ï¼‰çš„<a href="https://kubevela.io/#/en/developers/cap-center" target="_blank" rel="noopener noreferrer">ä½¿ç”¨æ–‡æ¡£</a>ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="äº†è§£æ›´å¤š"></a>äº†è§£æ›´å¤š<a class="hash-link" href="#äº†è§£æ›´å¤š" title="Direct link to heading">#</a></h2><p>KubeVela é¡¹ç›®æ˜¯ OAM ç¤¾åŒºçš„å®˜æ–¹é¡¹ç›®ï¼Œæ—¨åœ¨å–ä»£åŸå…ˆçš„ Rudr é¡¹ç›®ã€‚ä¸è¿‡ï¼Œä¸ <a href="https://github.com/oam-dev/rudr" target="_blank" rel="noopener noreferrer">Rudr</a> ä¸»è¦ä½œä¸ºâ€œå‚è€ƒå®ç°â€çš„å®šä½ä¸åŒï¼ŒKubeVela æ—¢æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯ã€é¢å‘å…¨é‡åœºæ™¯çš„ OAM Kubernetes å®Œæ•´å®ç°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯é˜¿é‡Œäº‘ EDAS æœåŠ¡å’Œå†…éƒ¨å¤šä¸ªæ ¸å¿ƒ PaaS/Serverless ç”Ÿäº§ç³»ç»Ÿåº•å±‚çš„æ ¸å¿ƒç»„ä»¶ã€‚ æ­¤å¤–ï¼ŒKubeVela ä¸­ Apppfile çš„è®¾è®¡ï¼Œä¹Ÿæ˜¯ OAM ç¤¾åŒºåœ¨ OAM è§„èŒƒä¸­å³å°†å¼•å…¥çš„â€œé¢å‘ç”¨æˆ·ä¾§å¯¹è±¡â€çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p><p>å¦‚æœä½ æƒ³è¦æ›´å¥½çš„äº†è§£ KubeVela é¡¹ç›®ï¼Œæ¬¢è¿å‰å¾€å…¶å®˜æ–¹ç½‘ç«™ä¸Š<a href="https://kubevela.io/" target="_blank" rel="noopener noreferrer">å­¦ä¹ å…·ä½“çš„ç¤ºä¾‹å’Œæ‰‹å†Œ</a>ã€‚ä»¥ä¸‹ä¹Ÿæ˜¯ä¸€äº›éå¸¸å¥½çš„å­¦ä¹ å†…å®¹å’Œæ–¹å¼ï¼š</p><ul><li>å‰å¾€å­¦ä¹  <a href="https://kubevela.io/#/en/quick-start" target="_blank" rel="noopener noreferrer">KubeVela Quick Startï¼ˆæ–°æ‰‹æ•™ç¨‹ï¼‰</a>ï¼Œä¸€æ­¥æ­¥äº†è§£ KubeVela çš„ä½¿ç”¨æ–¹æ³•ã€‚</li><li>å‰å¾€ OAM ç¤¾åŒºæ·±å…¥äº¤æµå’Œåé¦ˆã€‚ä¸­æ–‡ï¼šé’‰é’‰ç¾¤ 23310022ï¼Œè‹±æ–‡ï¼š<a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer">Gitter</a> å’Œ <a href="https://cloud-native.slack.com/archives/C01BLQ3HTJA" target="_blank" rel="noopener noreferrer">CNCF Slack</a>ã€‚</li><li>å°è¯•ä¸º <a href="https://kubevela.io/#/en/platform-engineers/trait" target="_blank" rel="noopener noreferrer">KubeVela æ·»åŠ æ¥è‡ªå¼€æºç¤¾åŒºçš„æ’ä»¶èƒ½åŠ›</a>ã€‚æ­¤å¤–ï¼Œå¦‚æœä½ æœ‰ä»»ä½•å…³äºæ‰©å±• KubeVela çš„å¥‡å¦™æƒ³æ³•ï¼Œæ¯”å¦‚ï¼ŒåŸºäº KubeVela å¼€å‘ä¸€ä¸ªè‡ªå·±çš„äº‘åŸç”Ÿæ•°æ®åº“ PaaS æˆ–è€… AI PaaSï¼Œæ¬¢è¿å‰å¾€ OAM ç¤¾åŒºé€šè¿‡ Issue æ¥è¿›è¡Œè®¨è®ºã€‚</li><li>ä¸º KubeVela è´¡çŒ®ä»£ç . KubeVela é¡¹ç›®æ˜¯ä¸€ä¸ªè¯ç”Ÿè‡ªäº‘åŸç”Ÿç¤¾åŒºçš„å¼€æºé¡¹ç›®ï¼ˆæ„Ÿè°¢æ¥è‡ª 8 å®¶ä¸åŒå…¬å¸çš„<a href="https://github.com/oam-dev/kubevela/blob/bbb2c527d96d3e1a0694e2f49b3d1d1168e72c53/OWNERS_ALIASES#L35" target="_blank" rel="noopener noreferrer">åˆå§‹è´¡çŒ®è€…</a>ï¼Œå¹¶ç‰¹åˆ«é¸£è°¢ KubeVela ç½‘ç«™çš„å‘èµ·è€… <a href="https://github.com/sunny0826" target="_blank" rel="noopener noreferrer">guoxudong</a>ï¼‰ã€‚ </li></ul><p><strong>KubeVela é¡¹ç›®çš„ç»´æŠ¤è€…ä¼šåœ¨é¡¹ç›®ç¨³å®šåï¼Œå³å°†æ•´ä¸ªé¡¹ç›®æ‰€æœ‰æƒæèµ ç»™ä¸­ç«‹å¼€æºåŸºé‡‘ä¼šã€‚</strong></p></div><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/zh/blog/tags/kubevela">kubevela</a></div><div class="col text--right"><a aria-label="Read more about KubeVela æ­£å¼å¼€æºï¼šä¸€ä¸ªé«˜å¯æ‰©å±•çš„äº‘åŸç”Ÿåº”ç”¨å¹³å°ä¸æ ¸å¿ƒå¼•æ“" href="/zh/blog/kubevela-the-extensible-app-platform-based-on-open-application-model-and-kubernetes"><strong>Read More</strong></a></div></footer></article></div></main></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">æ–‡æ¡£</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/install">å¿«é€Ÿå¼€å§‹</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/platform-engineers/overview">Platform Builder Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/quick-start-appfile">Developer Experience Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">ç¤¾åŒº</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog/tags/">DingTalk (23310022)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">æ›´å¤š</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2021 | Documentation Distributed under <a herf="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
      </div></div></div></footer></div>
<script src="/zh/assets/js/styles.3f20afd4.js"></script>
<script src="/zh/assets/js/runtime~main.884fc18b.js"></script>
<script src="/zh/assets/js/main.08e887b9.js"></script>
<script src="/zh/assets/js/1.89bb97b5.js"></script>
<script src="/zh/assets/js/2.462ea471.js"></script>
<script src="/zh/assets/js/3.d316d69f.js"></script>
<script src="/zh/assets/js/6875c492.8f6bf776.js"></script>
<script src="/zh/assets/js/34dd6e82.b455d1ee.js"></script>
<script src="/zh/assets/js/33713896.8fb82b92.js"></script>
<script src="/zh/assets/js/111d754a.c14d8bfd.js"></script>
<script src="/zh/assets/js/dcd7855b.5fbb5881.js"></script>
</body>
</html>