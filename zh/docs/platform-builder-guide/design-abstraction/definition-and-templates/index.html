<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="KubeVela Blog Atom Feed"><title data-react-helmet="true">Definition CRD | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Definition CRD | KubeVela"><meta data-react-helmet="true" name="description" content="Definition Objects"><meta data-react-helmet="true" property="og:description" content="Definition Objects"><link data-react-helmet="true" rel="shortcut icon" href="/zh/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/platform-builder-guide/design-abstraction/definition-and-templates" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/platform-builder-guide/design-abstraction/definition-and-templates" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.ec129baa.css">
<link rel="preload" href="/zh/assets/js/styles.069d6e94.js" as="script">
<link rel="preload" href="/zh/assets/js/runtime~main.7295a207.js" as="script">
<link rel="preload" href="/zh/assets/js/main.c3e33b2e.js" as="script">
<link rel="preload" href="/zh/assets/js/1.b439c6a9.js" as="script">
<link rel="preload" href="/zh/assets/js/2.4eafc9e0.js" as="script">
<link rel="preload" href="/zh/assets/js/3.67f1df16.js" as="script">
<link rel="preload" href="/zh/assets/js/1be78505.23675975.js" as="script">
<link rel="preload" href="/zh/assets/js/189.5848d0ca.js" as="script">
<link rel="preload" href="/zh/assets/js/935f2afb.a6a333c9.js" as="script">
<link rel="preload" href="/zh/assets/js/17896441.2c2c1721.js" as="script">
<link rel="preload" href="/zh/assets/js/143de4bf.b51972f4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/">ÊñáÊ°£</a><a class="navbar__item navbar__link" href="/zh/blog">ÂçöÂÆ¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates">Next</a></li><li><a class="dropdown__link" href="/zh/docs/v0.3.5/platform-builder-guide/design-abstraction/definition-and-templates">v0.3.5</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ÁÆÄ‰Ωì‰∏≠Êñá</span></span></a><ul class="dropdown__menu"><li><a href="/docs/platform-builder-guide/design-abstraction/definition-and-templates" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-githab-link"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/zh/"><img src="/zh/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/v0.3.5/platform-builder-guide/design-abstraction/definition-and-templates">v0.3.5</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/zh/docs/">ÊñáÊ°£</a></li><li class="menu__list-item"><a class="menu__link" href="/zh/blog">ÂçöÂÆ¢</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/platform-builder-guide/design-abstraction/definition-and-templates" target="_self" rel="noopener noreferrer" class="menu__link">English</a></li><li class="menu__list-item"><a href="/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-githab-link"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/overview/concepts">Core Concepts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/getting-started/install">Install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/getting-started/quick-start">Quick Start</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Platform Builder Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Design Abstraction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/platform-builder-guide/design-abstraction/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/platform-builder-guide/design-abstraction/application">Application CRD</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/zh/docs/platform-builder-guide/design-abstraction/definition-and-templates">Definition CRD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Using CUE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-cue/basic">Learning CUE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-cue/workload-type">Defining Workload Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-cue/trait">Defining Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-cue/status">Advanced Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-cue/openapi-v3-json-schema">Auto-generated Schema</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Using Helm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-helm/component">Define Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-helm/trait">Attach Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/platform-builder-guide/using-helm/known-issues">Known Limitations</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Experience Guide</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Appfile</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/appfile/quick-start-appfile">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/appfile/learn-appfile">Learning Appfile</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Command Line Tool (CLI)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/cli/port-forward">Port Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/cli/check-logs">Check Application Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/cli/exec-cmd">Execute Commands in Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/cli/cap-center">Managing Capabilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/cli/config-enviroments">Setting Up Deployment Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/developer-experience-guide/cli/config-app">Configuring Data/Env in Application</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_config">vela_config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_env">vela_env</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_init">vela_init</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_up">vela_up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_version">vela_version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_exec">vela_exec</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_logs">vela_logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_ls">vela_ls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_port-forward">vela_port-forward</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_show">vela_show</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_status">vela_status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_workloads">vela_workloads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_traits">vela_traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_system">vela_system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_template">vela_template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/cli-references/vela_cap">vela_cap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Capability References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/overview">overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/webservice">webservice</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/task">task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/worker">worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/route">route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/metrics">metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/scaler">scaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/capability-references/rest">Restful API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/zh/docs/roadmap/roadmap">Roadmap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/zh/docs/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">Definition CRD</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="definition-objects"></a>Definition Objects<a class="hash-link" href="#definition-objects" title="Direct link to heading">#</a></h2><p>This documentation explains how to register and manage available <em>components</em> and <em>traits</em> in your platform with <code>WorkloadDefinition</code> and <code>TraitDefinition</code>, so your end users could &quot;assemble&quot; them into a <code>Application</code> resource.</p><blockquote><p>All definition objects are expected to be maintained and installed by platform team, think them as <em>capability providers</em> in your platform.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>Essentially, a definition object in KubeVela is consisted by three section:</p><ul><li><strong>Capability Indexer</strong> defined by <code>spec.definitionRef</code><ul><li>this is for discovering the provider of this capability.</li></ul></li><li><strong>Interoperability Fields</strong><ul><li>they are for the platform to ensure a trait can work with given workload type. Hence only <code>TraitDefinition</code> has these fields.</li></ul></li><li><strong>Capability Encapsulation</strong> defined by <code>spec.schematic</code><ul><li>this defines the encapsulation (i.e. templating and parametering) of this capability. For now, user can choose to use Helm or CUE as encapsulation.</li></ul></li></ul><p>Hence, the basic structure of definition object is as below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> XxxDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;definition name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">.&lt;api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># cue template ...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">helm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># Helm chart ...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ... interoperability fields</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s explain these fields one by one.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="capability-indexer"></a>Capability Indexer<a class="hash-link" href="#capability-indexer" title="Direct link to heading">#</a></h3><p>The indexer of given capability is declared as <code>spec.definitionRef</code>.</p><p>Below is a definition for <em>Web Service</em> in KubeVela: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Describes long-running, scalable, containerized services that have a stable network endpoint to receive external network traffic from customers.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In above example, it claims to leverage Kubernetes Deployment (<code>deployments.apps</code>) as the workload type to instantiate this component.</p><p>Below is an example of <em>ingress</em> trait:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TraitDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  ingress</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingresses.networking.k8s.io</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Similarly, it claims to leverage Kubernetes Ingress (<code>ingresses.networking.k8s.io</code>) as the underlying provider of this capability.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="interoperability-fields"></a>Interoperability Fields<a class="hash-link" href="#interoperability-fields" title="Direct link to heading">#</a></h3><p>The interoperability fields are <strong>trait only</strong>. An overall view of interoperability fields in a <code>TraitDefinition</code> is show as below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TraitDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  ingress</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ingresses.networking.k8s.io</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">appliesToWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conflictsWith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workloadRefPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> spec.wrokloadRef </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Let&#x27;s explain them in detail.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="specappliestoworkloads"></a><code>.spec.appliesToWorkloads</code><a class="hash-link" href="#specappliestoworkloads" title="Direct link to heading">#</a></h4><p>This field defines the constraints that what kinds of workloads this trait is allowed to apply to.</p><ul><li>It accepts an array of string as value.</li><li>Each item in the array refers to one or a group of workload types to which this trait is allowded to apply.</li></ul><p>There are four approaches to denote one or a group of workload types.</p><ul><li><code>WorkloadDefinition</code> name, e.g., <code>webservice</code>, <code>worker</code></li><li><code>WorkloadDefinition</code> definition reference (CRD name), e.g., <code>deployments.apps</code></li><li>Resource group of <code>WorkloadDefinition</code> definition reference prefixed with <code>*.</code>, e.g., <code>*.apps</code>, <code>*.oam.dev</code>. This means the trait is allowded to apply to any workloads in this group.</li><li><code>*</code> means this trait is allowded to apply to any workloads</li></ul><p>If this field is omitted, it means this trait is allowded to apply to any workload types.</p><p>KubeVela will raise an error if a trait is applied to a workload which is NOT included in the <code>appliesToWorkloads</code>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="specconflictswith"></a><code>.spec.conflictsWith</code><a class="hash-link" href="#specconflictswith" title="Direct link to heading">#</a></h5><p>This field defines that constraints that what kinds of traits are conflicting with this trait, if they are applied to the same workload.</p><ul><li>It accepts an array of string as value. </li><li>Each item in the array refers to one or a group of traits.</li></ul><p>There are four approaches to denote one or a group of workload types.</p><ul><li><code>TraitDefinition</code> name, e.g., <code>ingress</code></li><li><code>TraitDefinition</code> definition reference (CRD name), e.g., <code>ingresses.networking.k8s.io</code></li><li>Resource group of <code>TraitDefinition</code> definition reference prefixed with <code>*.</code>, e.g., <code>*.networking.k8s.io</code>. This means the trait is conflicting with any traits in this group.</li><li><code>*</code> means this trait is conflicting with any other trait.</li></ul><p>If this field is omitted, it means this trait is NOT conflicting with any traits.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="specworkloadrefpath"></a><code>.spec.workloadRefPath</code><a class="hash-link" href="#specworkloadrefpath" title="Direct link to heading">#</a></h5><p>This field defines the field path of the trait which is used to store the reference of the workload to which the trait is applied.</p><ul><li>It accepts a string as value, e.g., <code>spec.workloadRef</code>.  </li></ul><p>If this field is set, KubeVela core will automatically fill the workload reference into target field of the trait. Then the trait controller can get the workload reference from the trait latter. So this field usually accompanies with the traits whose controllers relying on the workload reference at runtime. </p><p>Please check <a href="https://github.com/oam-dev/kubevela/blob/master/charts/vela-core/templates/defwithtemplate/manualscale.yaml" target="_blank" rel="noopener noreferrer">scaler</a> trait as a demonstration of how to set this field.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="capability-encapsulation"></a>Capability Encapsulation<a class="hash-link" href="#capability-encapsulation" title="Direct link to heading">#</a></h3><p>The encapsulation (i.e. templating and parametering) of given capability are defined in <code>spec.schematic</code> field. For example, below is the full definition of <em>Web Service</em> type in KubeVela:</p><details><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> core.oam.dev/v1alpha2</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> WorkloadDefinition</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> default</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">definition.oam.dev/description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Describes long-running, scalable, containerized services that have a stable network endpoint to receive external network traffic from customers.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">definitionRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deployments.apps</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schematic</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">cue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        output: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            apiVersion: &quot;apps/v1&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            kind:       &quot;Deployment&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">            spec: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                selector: matchLabels: {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                    &quot;app.oam.dev/component&quot;: context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">                }</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">&quot;app.oam.dev/component&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">  context.name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.image</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            if parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cmd&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.cmd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            if parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;env&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.env</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            if context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;config&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> context.config</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.port</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            if parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cpu&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token tag" style="color:rgb(255, 121, 198)">!=</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">_ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                    </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                        </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.cpu</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                    </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                        </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> parameter.cpu</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Which image would you like to use for your service</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +short=i</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Commands to run in the container</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">cmd?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Which port do you want customer traffic sent to</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +short=p</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">*80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> int</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Define arguments by using environment variables</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">env?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                // +usage=Environment variable name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                // +usage=The value of the environment variable</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">value?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                // +usage=Specifies a source the value of this var should come from</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">valueFrom?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    // +usage=Selects a key of a secret in the pod&#x27;s namespace</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        // +usage=The name of the secret in the pod&#x27;s namespace to select from</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        // +usage=The key of the secret to select from. Must be a valid secret key</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            // +usage=Number of CPU units for the service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> like `0.5` (0.5 CPU core)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `1` (1 CPU core)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">cpu?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">     </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></details><p>It&#x27;s by design that KubeVela supports multiple ways to define the encapsulation. Hence, we will explain this field in detail with following guides.</p><ul><li>Learn about <a href="/zh/docs/platform-builder-guide/using-cue/basic">CUE</a> based capability definitions.</li><li>Learn about <a href="/zh/docs/platform-builder-guide/using-helm/component">Helm</a> based capability definitions.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oam-dev/kubevela.io/docs/platform-builder-guide/design-abstraction/definition-and-templates.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ÁºñËæëÊú¨È°µ</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-03-25T09:06:33.000Z" class="lastUpdatedDate_1WI_">3/25/2021</time> by <strong>guoxudong</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/docs/platform-builder-guide/design-abstraction/application"><div class="pagination-nav__sublabel">‰∏ä‰∏ÄÈ°µ</div><div class="pagination-nav__label">¬´ Application CRD</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/docs/platform-builder-guide/using-cue/basic"><div class="pagination-nav__sublabel">‰∏ã‰∏ÄÈ°µ</div><div class="pagination-nav__label">Learning CUE ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#definition-objects" class="table-of-contents__link">Definition Objects</a></li><li><a href="#overview" class="table-of-contents__link">Overview</a><ul><li><a href="#capability-indexer" class="table-of-contents__link">Capability Indexer</a></li><li><a href="#interoperability-fields" class="table-of-contents__link">Interoperability Fields</a></li><li><a href="#capability-encapsulation" class="table-of-contents__link">Capability Encapsulation</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a href="https://kubevela.io/docs/getting-started/install" target="_blank" rel="noopener noreferrer" class="footer__link-item">Getting Started</a></li><li class="footer__item"><a href="https://kubevela.io/docs/platform-builder-guide/design-abstraction/overview" target="_blank" rel="noopener noreferrer" class="footer__link-item">Platform Builder Guide</a></li><li class="footer__item"><a href="https://kubevela.io/docs/developer-experience-guide/appfile/quick-start-appfile" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Experience Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://wj.qq.com/s2/7438465/6bd6" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/docs/platform-builder-guide/design-abstraction/">DingTalk (23310022)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>¬© Kubectl Pod Lens Authors 2021 | Documentation Distributed under CC-BY-4.0 </strong>
        <br>
      </div></div></div></footer></div>
<script src="/zh/assets/js/styles.069d6e94.js"></script>
<script src="/zh/assets/js/runtime~main.7295a207.js"></script>
<script src="/zh/assets/js/main.c3e33b2e.js"></script>
<script src="/zh/assets/js/1.b439c6a9.js"></script>
<script src="/zh/assets/js/2.4eafc9e0.js"></script>
<script src="/zh/assets/js/3.67f1df16.js"></script>
<script src="/zh/assets/js/1be78505.23675975.js"></script>
<script src="/zh/assets/js/189.5848d0ca.js"></script>
<script src="/zh/assets/js/935f2afb.a6a333c9.js"></script>
<script src="/zh/assets/js/17896441.2c2c1721.js"></script>
<script src="/zh/assets/js/143de4bf.b51972f4.js"></script>
</body>
</html>